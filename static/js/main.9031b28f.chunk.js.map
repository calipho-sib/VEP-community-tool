{"version":3,"sources":["utils/featureList.ts","utils/helpers/getFeatures.ts","utils/helpers/exportFile.ts","utils/constants.ts","components/CSVUpload.tsx","utils/icons/down_arrow_icon.svg","utils/icons/up_arrow_icon.svg","utils/icons/sort_icon.svg","utils/icons/info_icon.svg","utils/helpers/logger.ts","utils/service.ts","components/Table.tsx","utils/icons/loader.svg","components/Isoform.tsx","components/Loader.tsx","components/FeatureViewer.tsx","utils/icons/nextprot-logo.png","App.tsx","reportWebVitals.ts","index.tsx","../../feature-viewer-test/feature-viewer/lib/index.js","../../feature-viewer-test/feature-viewer/src/feature-viewer.js","../../feature-viewer-test/feature-viewer/utils/icons.js","../../feature-viewer-test/feature-viewer/utils/data.js","../../feature-viewer-test/feature-viewer/src/fv.nextprot.js"],"names":["featureList","APIRef","metadata","name","className","color","type","filter","height","addFeatures","featuresForViewer","isoName","map","currentFeature","Object","keys","length","prototype","hasOwnProperty","call","push","getExportFileBlob","props","columns","data","fileType","headerNames","col","exportValue","csvString","Papa","unparse","fields","Blob","ERROR","papaparseOptions","header","dynamicTyping","skipEmptyLines","transformHeader","replace","CSVUpload","callGetPredictions","useState","fileName","setFileName","cssClass","onFileLoaded","fileInfo","parserOptions","cssInputClass","log","process","REACT_APP_DEVELOPMENT","console","baseURL","REACT_APP_API_BASE_URL","getPredictions","a","axios","post","then","res","catch","err","entry","get","RESULT_COLUMN_DATA","Header","accessor","Cell","row","Number","id","GlobalFilter","globalFilter","setGlobalFilter","value","setValue","onChange","useAsyncDebounce","undefined","e","target","placeholder","_circle","_circle2","_circle3","Table","setData","csvData","isoform","variants","useMemo","useTable","getExportFileName","initialState","pageIndex","pageSize","useGlobalFilter","useSortBy","useExportData","usePagination","getTableProps","getTableBodyProps","headerGroups","prepareRow","page","state","canPreviousPage","canNextPage","pageOptions","pageCount","gotoPage","nextPage","preGlobalFilteredRows","previousPage","setPageSize","exportData","style","display","marginLeft","onClick","headerGroup","getHeaderGroupProps","key","uuidv4","headers","column","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","src","Icon","alt","getRowProps","cells","cell","getCellProps","disabled","defaultValue","onBlur","LabelComponent","offset","title","Isoform","handleIsoformChange","options","setOptions","selectedOption","setSelectedOption","useEffect","optionMap","iso","option","label","isOptionDisabled","_excluded","_extends","assign","i","arguments","source","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLoader","_ref","svgRef","titleId","xmlns","xmlnsXlink","x","y","viewBox","enableBackground","xmlSpace","ref","fill","stroke","cx","cy","r","attributeName","dur","values","repeatCount","begin","ForwardRef","Loader","FeatureViewerComponent","fv","setIsoform","sequence","setSequence","setIsoName","features","setFeatures","error","setError","loading","setLoading","nx","Nextprot","Client","buildFeatures","sequences","forEach","seq","uniqueName","createFeature","showAxis","showSequence","brushActive","toolbar","bubbleHelp","zoomMax","variant","feat","addFeature","onVariantChanged","d","detail","onGetPredictions","paramEntry","URLSearchParams","window","location","search","getIsoformList","Promise","all","nxEntry","getProteinSequence","getAntibody","getIsoformMapping","getAnnotationsWithProperty","getAnnotationsByCategory","getFeaturesByView","rawData","featsForViewer","metaData","featForViewer","NXUtils","convertMappingsToIsoformMap","NXViewerUtils","convertNXAnnotations","getFeaturesByIsoform","_","getMetadataByView","isoformAccession","document","getElementById","innerHTML","App","nextprotLogo","FeatureViewer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","global","jQuery","$","require","d3","nxFeatureViewer","mixin","module","exports","crossIcon","deleteIcon","bottomArrowIcon","dropdownOptions","div","self","events","FEATURE_SELECTED_EVENT","FEATURE_DESELECTED_EVENT","ZOOM_EVENT","GET_PREDICTIONS_EVENT","VARIANT_ADDED_EVENT","svgElement","el","substring","intLength","isInteger","fvLength","SVGOptions","verticalLine","dottedSequence","start","end","warn","svg","svgContainer","yAxisSVG","yAxisSVGgroup","seqPos","absoluteSeqPos","pathLevel","yData","Yposition","level","seqShift","current_extend","featureSelected","animation","singleVariant","multipleVariant","colorSelectedFeat","object","select","originalColor","margin","width","scaling","scale","linear","domain","range","scalingPosition","updateLineTooltip","mouse","pD","xP","elemHover","l","helper","tooltip","tooltipDiv","selectedRect","bodyNode","node","tooltipColor","selection","on","pI","selectAll","remove","absoluteMousePos","rightside","append","attr","left","bottom","offsetHeight","padding","position","first_line","description","second_line","html","getBoundingClientRect","xTemp","yTemp","xRect","widthRect","nodeName","rect","previousSibling","svgWidth","getBBox","parseInt","top","CustomEvent","event","dispatchEvent","trigger","_x","attrs","styles","X","displaySequence","rectWidth","rectX","rectWidth2","addLevel","array","leveling","placed","k","onFeatureSelected","listener","addEventListener","onFeatureDeselected","onZoom","lineBond","line","interpolate","lineGen","lineYscale","xAxis","axis","tickFormat","format","orient","shadeBlendConvert","p","from","to","sbcRip","RGB","split","slice","parseFloat","Math","round","h","b","f","t","toString","updateSVGHeight","yAxisScale","ordinal","rangeRoundBands","updateYaxis","enter","join","text","forcePropagation","item","brush_elm","new_click_event","Event","pageX","clientX","pageY","clientY","tickValues","preComputing","sort","shift","unshift","maxValue","max","o","abs","fillSVG","typeIdentifier","rectangle","unique","multipleRect","path","Array","isArray","negativeNumbers","seqSelected","showPopup","posX","calculatePos","singlePopup","hide","popupContainer","dropdown","dropdownWrapper","toggle","dropdownContainer","variantValue","variantAminoAcid","nextprotPosition","callOnVariantChanged","addVariant","toUpperCase","getElementsByTagName","textContent","innerText","dropdownOptionContainer","show","divPos","entries","parent","children","sequenceLine","transition","duration","rectHeight","rectShift","lineShift","rectsPro","dataline","rectsProGroup","uniqueShift","pathsDB","interpolation","histog","dd","rects","showFilteredFeature","baseUrl","minY","maxY","gradient","url_gradient","url_dropshadow","hideFilteredFeature","transit1","transit2","brush","brushend","constructor","info","extent","extentLength","empty","zoomScale","toFixed","currentShift","transition_data","reset_axis","zoom","clear","resetZoom","resetAll","resizeCallback","updateWindow","lastValue","splice","callOnGetPredictions","rest","addRectSelection","svgId","featSelection","elemSelected","tagName","fn","popover","unit","headerOptions","headerPosition","headerZoom","helpContent","find","updateInputValues","idx","variantIndex","findIndex","m","originalValue","charAt","validateInput","appendInputFields","variantValues","inputCount","inputWrapper","inputContainer","property","not","txtValue","original","setInputError","lastSelectValue","lastInputValue","showError","multipleVariantPopup","popup","multipleVariantContainer","showMultipleVariantPopup","each","$this","is","originalAminoAcid","prop","checked","index","btnContainer","preventDefault","defs","feMerge","positionWithoutLetter","vertical","mousex","addVerticalLine","initSVG","appendTo","clearInstance","off","A","R","N","D","C","E","Q","G","H","I","L","K","M","F","P","S","T","W","Y","V","mergeData","oneData","viewer","addNxFeature","featuresName","featuresStyle","that","resolve","reject","list","getFeaturesByview","nxClient","feature","extend","filterFeatures","message","stack","ft","startsWith","isoNb"],"mappings":"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","file":"static/js/main.9031b28f.chunk.js","sourcesContent":["import { FeatureListType } from \"./types\";\n\nexport const featureList: FeatureListType[] = [\n  {\n    APIRef: \"sequence\",\n    metadata: { name: \"Sequence\" },\n  },\n  {\n    APIRef: \"beta-strand\",\n    metadata: {\n      name: \"Beta strand\",\n      className: \"betastrand\",\n      color: \"#B3F0C2\",\n      type: \"rect\",\n      filter: \"Secondary structure\",\n    },\n  },\n  {\n    APIRef: \"helix\",\n    metadata: {\n      name: \"Helix\",\n      className: \"helix\",\n      color: \"#B3F0D1\",\n      type: \"rect\",\n      filter: \"Secondary structure\",\n    },\n  },\n  {\n    APIRef: \"turn\",\n    metadata: {\n      name: \"Turn\",\n      className: \"turn\",\n      color: \"#B3F0E1\",\n      type: \"rect\",\n      filter: \"Secondary structure\",\n    },\n  },\n  {\n    APIRef: \"signal-peptide\",\n    metadata: {\n      name: \"Signal peptide\",\n      className: \"sign\",\n      color: \"#B3B3E1\",\n      type: \"rect\",\n      filter: \"Processing\",\n    },\n  },\n  {\n    APIRef: \"propeptide\",\n    metadata: {\n      name: \"Propeptide\",\n      className: \"pro\",\n      color: \"#B3B3B3\",\n      type: \"rect\",\n      filter: \"Processing\",\n    },\n  },\n  {\n    APIRef: \"mature-protein\",\n    metadata: {\n      name: \"Mature protein\",\n      className: \"mat\",\n      color: \"#B3B3C2\",\n      type: \"rect\",\n      filter: \"Processing\",\n    },\n  },\n  {\n    APIRef: \"initiator-methionine\",\n    metadata: {\n      name: \"Initiator Met\",\n      className: \"initMeth\",\n      color: \"#B3B3D1\",\n      type: \"unique\",\n      filter: \"Processing\",\n    },\n  },\n  {\n    APIRef: \"peroxisome-transit-peptide\",\n    metadata: {\n      name: \"Transit peptide\",\n      className: \"pero\",\n      color: \"#B3B3F0\",\n      type: \"rect\",\n      filter: \"Processing\",\n    },\n  },\n  {\n    APIRef: \"mitochondrial-transit-peptide\",\n    metadata: {\n      name: \"Transit peptide\",\n      className: \"mito\",\n      color: \"#B3B3F0\",\n      type: \"rect\",\n      filter: \"Processing\",\n    },\n  },\n  {\n    APIRef: \"domain\",\n    metadata: {\n      name: \"Domain\",\n      className: \"domain\",\n      color: \"#B3C2C2\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"miscellaneous-region\",\n    metadata: {\n      name: \"Region\",\n      className: \"miscregion\",\n      color: \"#B3C2B3\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"repeat\",\n    metadata: {\n      name: \"Repeat\",\n      className: \"repeat\",\n      color: \"#98B7D5\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"calcium-binding-region\",\n    metadata: {\n      name: \"Calcium binding\",\n      className: \"calcium\",\n      color: \"#B3C2E1\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"zinc-finger-region\",\n    metadata: {\n      name: \"Zinc finger\",\n      className: \"calcium\",\n      color: \"#B3C2E1\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"dna-binding-region\",\n    metadata: {\n      name: \"DNA binding\",\n      className: \"dnabind\",\n      color: \"#B3C2FF\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"nucleotide-phosphate-binding-region\",\n    metadata: {\n      name: \"Nucleotide binding\",\n      className: \"nucleobind\",\n      color: \"#B3D1B3\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"coiled-coil-region\",\n    metadata: {\n      name: \"Coiled-coil\",\n      className: \"coiledcoil\",\n      color: \"#B3D1C2\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"short-sequence-motif\",\n    metadata: {\n      name: \"Sequence motif\",\n      className: \"motif\",\n      color: \"#B3D1D1\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"compositionally-biased-region\",\n    metadata: {\n      name: \"Composition bias\",\n      className: \"biased\",\n      color: \"#B3D1E1\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"interacting-region\",\n    metadata: {\n      name: \"Interacting region\",\n      className: \"intReg\",\n      color: \"#B3D1F0\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"interaction-mapping\",\n    metadata: {\n      name: \"Exp. interaction\",\n      className: \"intregion\",\n      color: \"#B3E1D1\",\n      type: \"rect\",\n      filter: \"Region\",\n    },\n  },\n  {\n    APIRef: \"topological-domain\",\n    metadata: {\n      name: \"Topological domain\",\n      className: \"topodomain\",\n      color: \"#A5DBA5\",\n      type: \"rect\",\n      filter: \"Topology\",\n    },\n  },\n  {\n    APIRef: \"transmembrane-region\",\n    metadata: {\n      name: \"Membrane\",\n      className: \"membrane\",\n      color: \"#A5DBB7\",\n      type: \"rect\",\n      filter: \"Topology\",\n    },\n  },\n  {\n    APIRef: \"intramembrane-region\",\n    metadata: {\n      name: \"Membrane\",\n      className: \"intramembrane\",\n      color: \"#A5DBB7\",\n      type: \"rect\",\n      filter: \"Topology\",\n    },\n  },\n  {\n    APIRef: \"disulfide-bond\",\n    metadata: {\n      name: \"Disulfide bond\",\n      className: \"dsB\",\n      color: \"#B3B3E1\",\n      type: \"path\",\n      filter: \"Modified Residue\",\n    },\n  },\n  {\n    APIRef: \"modified-residue\",\n    metadata: {\n      name: \"Modified residue\",\n      className: \"modifRes\",\n      color: \"#B3C2B3\",\n      type: \"unique\",\n      filter: \"Modified Residue\",\n    },\n  },\n  {\n    APIRef: \"cross-link\",\n    metadata: {\n      name: \"Cross-link\",\n      className: \"crossLink\",\n      color: \"#B3C2C2\",\n      type: \"unique\",\n      filter: \"Modified Residue\",\n    },\n  },\n  {\n    APIRef: \"glycosylation-site\",\n    metadata: {\n      name: \"Glycosylation\",\n      className: \"glycoSite\",\n      color: \"#74E374\",\n      type: \"unique\",\n      filter: \"Modified Residue\",\n    },\n  },\n  {\n    APIRef: \"lipidation-site\",\n    metadata: {\n      name: \"Lipidation\",\n      className: \"lipidation\",\n      color: \"#A3B5DB\",\n      type: \"unique\",\n      filter: \"Modified Residue\",\n    },\n  },\n  {\n    APIRef: \"selenocysteine\",\n    metadata: {\n      name: \"Non-standard AA\",\n      className: \"seleno\",\n      color: \"#859DE7\",\n      type: \"unique\",\n      filter: \"Modified Residue\",\n    },\n  },\n  {\n    APIRef: \"miscellaneous-site\",\n    metadata: {\n      name: \"Site\",\n      className: \"site\",\n      color: \"#B3F0E1\",\n      type: \"unique\",\n      filter: \"Site\",\n    },\n  },\n  {\n    APIRef: \"active-site\",\n    metadata: {\n      name: \"Active site\",\n      className: \"actSite\",\n      color: \"#B3F0F0\",\n      type: \"unique\",\n      filter: \"Site\",\n    },\n  },\n  {\n    APIRef: \"binding-site\",\n    metadata: {\n      name: \"Binding site\",\n      className: \"bindsite\",\n      color: \"#82E6FF\",\n      type: \"unique\",\n      filter: \"Site\",\n    },\n  },\n  {\n    APIRef: \"cleavage-site\",\n    metadata: {\n      name: \"Cleavage site\",\n      className: \"cleavsite\",\n      color: \"#B3FFB3\",\n      type: \"unique\",\n      filter: \"Site\",\n    },\n  },\n  {\n    APIRef: \"metal-binding-site\",\n    metadata: {\n      name: \"Metal binding\",\n      className: \"metal\",\n      color: \"#B3FFC2\",\n      type: \"unique\",\n      filter: \"Site\",\n    },\n  },\n  {\n    APIRef: \"variant\",\n    metadata: {\n      name: \"Variant\",\n      className: \"variant\",\n      color: \"rgba(0,255,154,0.3)\",\n      type: \"unique\",\n      filter: \"Variant\",\n    },\n  },\n  {\n    APIRef: \"mutagenesis\",\n    metadata: {\n      name: \"Mutagenesis\",\n      className: \"mutagenesis\",\n      color: \"#73FFE3\",\n      type: \"unique\",\n      filter: \"Variant\",\n    },\n  },\n  {\n    APIRef: \"sequence-conflict\",\n    metadata: {\n      name: \"Conflict\",\n      className: \"seqconflict\",\n      color: \"#6FFFFF\",\n      type: \"unique\",\n      filter: \"Conflict\",\n    },\n  },\n  {\n    APIRef: \"peptide-mapping\",\n    metadata: {\n      name: \"Peptide\",\n      className: \"pep\",\n      color: \"#B3E1D1\",\n      type: \"rect\",\n      filter: \"Peptide\",\n      height: 8,\n    },\n  },\n  {\n    APIRef: \"isoform-mapping\",\n    metadata: {\n      name: \"Isoform\",\n    },\n  },\n];\n","import { NXUtils, NXViewerUtils } from \"feature-viewer\";\n\nimport {\n  FeatsForViewer,\n  FeatureData,\n  FeatureListType,\n  MetaData,\n} from \"../types\";\nimport { featureList } from \"../featureList\";\n\nexport function getFeaturesByView(\n  featureList: FeatureListType[],\n  nx: any,\n  nxEntry: string,\n) {\n  let featuresForViewer = [];\n\n  for (let feat in featureList) {\n    switch (featureList[feat].APIRef) {\n      case \"sequence\":\n        featuresForViewer.push(nx.getProteinSequence(nxEntry));\n        break;\n      case \"antibody\":\n        featuresForViewer.push(nx.getAntibody(nxEntry));\n        break;\n      case \"isoform-mapping\":\n        featuresForViewer.push(nx.getIsoformMapping(nxEntry));\n        break;\n      case \"variant-medical\":\n        featuresForViewer.push(\n          nx.getAnnotationsWithProperty(\n            nxEntry,\n            \"variant\",\n            \"disease-related\",\n            true,\n          ),\n        );\n        break;\n      case \"miscellaneous-region-interactions\":\n        featuresForViewer.push(\n          nx.getAnnotationsWithProperty(\n            nxEntry,\n            \"miscellaneous-region\",\n            \"interaction-related\",\n            true,\n          ),\n        );\n        break;\n      default:\n        featuresForViewer.push(\n          nx.getAnnotationsByCategory(nxEntry, featureList[feat].APIRef),\n        );\n        break;\n    }\n  }\n  return featuresForViewer;\n}\n\nexport function getFeaturesByIsoform(rawData: any, metaData: MetaData[]) {\n  let featuresForViewer = [];\n  let featForViewer;\n\n  for (let i = 1; i < rawData.length - 1; i++) {\n    let feat = NXUtils.convertMappingsToIsoformMap(\n      rawData[i],\n      metaData[i].name.replace(\".\", \"\"),\n      metaData[i].filter,\n      \"\",\n    );\n\n    featForViewer = NXViewerUtils.convertNXAnnotations(feat, metaData[i], {});\n    featuresForViewer.push(featForViewer);\n  }\n  return featuresForViewer;\n}\n\nexport function addFeatures(\n  featuresForViewer: FeatsForViewer[],\n  isoName: string,\n) {\n  let featureList: FeatureData[] = [];\n\n  featuresForViewer.map((currentFeature) => {\n    if (\n      Object.keys(currentFeature).length !== 0 &&\n      Object.prototype.hasOwnProperty.call(currentFeature, isoName)\n    ) {\n      featureList.push({ ...currentFeature[isoName] });\n    }\n  });\n  return featureList;\n}\n\nexport function getMetadataByView() {\n  let metaData: MetaData[] = [];\n\n  featureList.map((_, i) => {\n    metaData.push(featureList[i].metadata);\n  });\n  return metaData;\n}\n","import Papa from \"papaparse\";\n\ntype FileProps = {\n  columns: any;\n  data: any;\n  fileType: string;\n};\n\nexport function getExportFileBlob(props: FileProps) {\n  const { columns, data, fileType } = props;\n\n  if (fileType === \"csv\") {\n    const headerNames = columns.map((col: any) => col.exportValue);\n    const csvString = Papa.unparse({ fields: headerNames, data });\n    return new Blob([csvString], { type: \"text/csv\" });\n  }\n}\n","export const ERROR = {\n  NOT_FOUND: \"Couldn't find entry data.\",\n};\n\nexport const TABLE_PAGE_SIZE = 10;\n","import React, { useState } from \"react\";\nimport CSVReader from \"react-csv-reader\";\nimport { VariantData } from \"../utils/types\";\n\ntype Props = {\n  callGetPredictions: (data: VariantData[]) => void;\n};\n\ntype FileInfo = {\n  name: string;\n  size: number;\n  type: string;\n};\n\nconst papaparseOptions = {\n  header: true,\n  dynamicTyping: true,\n  skipEmptyLines: true,\n  transformHeader: (header: string) => {\n    return header.replace(/\\W/g, \"-\");\n  },\n};\n\nconst CSVUpload = ({ callGetPredictions }: Props) => {\n  const [fileName, setFileName] = useState(\"\");\n\n  const handleForce = (data: VariantData[], fileInfo: FileInfo) => {\n    callGetPredictions(data);\n    setFileName(fileInfo.name);\n  };\n\n  return (\n    <div className=\"csv-button-container\">\n      <div className=\"csv-button\">\n        <button className=\"export-btn\">Upload CSV</button>\n        {fileName && <p>{fileName}</p>}\n      </div>\n      <CSVReader\n        cssClass=\"csv-reader-input\"\n        onFileLoaded={handleForce}\n        parserOptions={papaparseOptions}\n        cssInputClass=\"csv-input\"\n      />\n    </div>\n  );\n};\n\nexport default CSVUpload;\n","export default __webpack_public_path__ + \"static/media/down_arrow_icon.4f1d5ef1.svg\";","export default __webpack_public_path__ + \"static/media/up_arrow_icon.6ff07499.svg\";","export default __webpack_public_path__ + \"static/media/sort_icon.86d67f70.svg\";","export default __webpack_public_path__ + \"static/media/info_icon.09c4a3bc.svg\";","const log = (...data: any) => {\n  if (process.env.REACT_APP_DEVELOPMENT) {\n    console.log(data);\n  }\n};\n\nexport default log;\n","import axios from \"axios\";\nimport log from \"./helpers/logger\";\nimport { IsoformMapping, PredictionData, VariantData } from \"./types\";\n\nconst baseURL = process.env.REACT_APP_API_BASE_URL;\n\nexport async function getPredictions(data: PredictionData) {\n  let res: VariantData[];\n  res = await axios\n    .post(`${baseURL}/vep-results`, data)\n    .then((res) => {\n      return res.data;\n    })\n    .catch((err) => {\n      log(err);\n    });\n\n  return res;\n}\n\nexport async function getIsoformList(entry: string) {\n  let res: IsoformMapping[] | undefined;\n  res = await axios\n    .get(`${baseURL}/mapping-isoforms/${entry}`)\n    .then((res) => {\n      return res.data;\n    })\n    .catch((err) => {\n      log(err);\n    });\n\n  return res;\n}\n","import {\n  useTable,\n  useAsyncDebounce,\n  useSortBy,\n  usePagination,\n  useGlobalFilter,\n} from \"react-table\";\nimport { useExportData } from \"react-table-plugins\";\nimport React, { useState, useMemo } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { getExportFileBlob } from \"../utils/helpers/exportFile\";\nimport { VariantData } from \"../utils/types\";\nimport { TABLE_PAGE_SIZE } from \"../utils/constants\";\nimport CSVUpload from \"./CSVUpload\";\nimport * as Icon from \"../utils/icons/index\";\nimport { getPredictions } from \"../utils/service\";\n\nconst RESULT_COLUMN_DATA = [\n  {\n    Header: \"S. No.\",\n    accessor: \"id\",\n    Cell: function rowSerial(row: any) {\n      return <div>{Number(row.row.id) + 1}</div>;\n    },\n  },\n  {\n    Header: \"Position\",\n    accessor: \"nextprotPosition\",\n  },\n  {\n    Header: \"Original\",\n    accessor: \"originalAminoAcid\",\n  },\n  {\n    Header: \"Variant\",\n    accessor: \"variantAminoAcid\",\n  },\n  {\n    Header: \"Sift\",\n    accessor: \"sift\",\n  },\n  {\n    Header: \"Polyphen\",\n    accessor: \"polyphen\",\n  },\n];\n\ntype TableProps = {\n  data: VariantData[];\n  setData: (data: VariantData[]) => void;\n  isoName: string | undefined;\n};\n\nfunction GlobalFilter({ globalFilter, setGlobalFilter }: any) {\n  const [value, setValue] = useState(globalFilter);\n\n  const onChange = useAsyncDebounce((value) => {\n    setGlobalFilter(value || undefined);\n  }, 200);\n\n  return (\n    <input\n      className=\"search-input\"\n      value={value || \"\"}\n      onChange={(e) => {\n        setValue(e.target.value);\n        onChange(e.target.value);\n      }}\n      placeholder={`Search...`}\n    />\n  );\n}\n\nconst Table = (props: TableProps) => {\n  const { data, setData, isoName } = props;\n\n  const callGetPredictions = async (csvData: VariantData[]) => {\n    const data = {\n      isoform: isoName,\n      variants: csvData,\n    };\n    await getPredictions(data).then((res) => {\n      setData(res);\n    });\n  };\n\n  const columns = useMemo(() => RESULT_COLUMN_DATA, []);\n\n  const getExportFileName = () => {\n    return isoName;\n  };\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    prepareRow,\n    page,\n    state,\n    canPreviousPage,\n    canNextPage,\n    pageOptions,\n    pageCount,\n    gotoPage,\n    nextPage,\n    preGlobalFilteredRows,\n    setGlobalFilter,\n    previousPage,\n    setPageSize,\n    state: { pageIndex, pageSize },\n    exportData,\n  } = useTable(\n    {\n      //@ts-ignore\n      columns,\n      data,\n      getExportFileBlob,\n      getExportFileName,\n      initialState: { pageIndex: 0, pageSize: TABLE_PAGE_SIZE },\n    },\n    useGlobalFilter,\n    useSortBy,\n    useExportData,\n    usePagination,\n  );\n\n  return (\n    <div className=\"variant-table-container\">\n      <div className=\"table-header\" style={{ display: \"flex\" }}>\n        <CSVUpload callGetPredictions={callGetPredictions} />\n        <div style={{ marginLeft: \"auto\" }}>\n          <GlobalFilter\n            preGlobalFilteredRows={preGlobalFilteredRows}\n            globalFilter={state.globalFilter}\n            setGlobalFilter={setGlobalFilter}\n          />\n          <button\n            className=\"export-btn\"\n            onClick={() => {\n              exportData(\"csv\", true);\n            }}\n          >\n            Export All as CSV\n          </button>\n        </div>\n      </div>\n      <table {...getTableProps()} className=\"variant-data-table\">\n        <thead>\n          {headerGroups.map((headerGroup) => {\n            return (\n              <tr {...headerGroup.getHeaderGroupProps()} key={uuidv4()}>\n                {headerGroup.headers.map((column) => {\n                  return (\n                    <th\n                      {...column.getHeaderProps(column.getSortByToggleProps())}\n                      key={uuidv4()}\n                    >\n                      {column.render(\"Header\")}\n                      <span>\n                        {column.isSorted ? (\n                          column.isSortedDesc ? (\n                            <img\n                              src={Icon.DownArrow}\n                              className=\"icon\"\n                              alt=\"Down arrow icon\"\n                            />\n                          ) : (\n                            <img\n                              src={Icon.UpArrow}\n                              className=\"icon\"\n                              alt=\"Down arrow icon\"\n                            />\n                          )\n                        ) : (\n                          <img\n                            src={Icon.Sort}\n                            className=\"icon\"\n                            alt=\"Down arrow icon\"\n                          />\n                        )}\n                      </span>\n                    </th>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </thead>\n        <tbody {...getTableBodyProps()}>\n          {page.map((row) => {\n            prepareRow(row);\n            return (\n              <tr {...row.getRowProps()} key={uuidv4()}>\n                {row.cells.map((cell) => {\n                  return (\n                    <td {...cell.getCellProps()} key={uuidv4()}>\n                      {cell.render(\"Cell\")}\n                    </td>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n      {data.length === 0 ? (\n        <p className=\"table-text\">\n          <i>\n            No records added. Add variants and click on get predictions to get\n            results\n          </i>\n          .\n        </p>\n      ) : (\n        <div className=\"pagination\">\n          <button onClick={() => gotoPage(0)} disabled={!canPreviousPage}>\n            {\"<<\"}\n          </button>{\" \"}\n          <button onClick={() => previousPage()} disabled={!canPreviousPage}>\n            {\"<\"}\n          </button>{\" \"}\n          <button onClick={() => nextPage()} disabled={!canNextPage}>\n            {\">\"}\n          </button>{\" \"}\n          <button\n            onClick={() => gotoPage(pageCount - 1)}\n            disabled={!canNextPage}\n          >\n            {\">>\"}\n          </button>{\" \"}\n          <span>\n            Page{\" \"}\n            <strong>\n              {pageIndex + 1} of {pageOptions.length}\n            </strong>{\" \"}\n          </span>\n          <span>\n            | Go to page:{\" \"}\n            <input\n              type=\"number\"\n              defaultValue={pageIndex + 1 || 1}\n              onChange={(e) => {\n                const page = e.target.value ? Number(e.target.value) - 1 : 0;\n                gotoPage(page);\n              }}\n            />\n          </span>{\" \"}\n          <select\n            value={pageSize}\n            onBlur={(e) => {\n              setPageSize(Number(e.target.value));\n            }}\n          >\n            {[10, 20, 30, 40, 50].map((pageSize) => (\n              <option key={pageSize} value={pageSize}>\n                Show {pageSize}\n              </option>\n            ))}\n          </select>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Table;\n","var _circle, _circle2, _circle3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLoader(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"L5\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 100 100\",\n    enableBackground: \"new 0 0 0 0\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#166ff8\",\n    stroke: \"none\",\n    cx: 6,\n    cy: 50,\n    r: 6\n  }, /*#__PURE__*/React.createElement(\"animateTransform\", {\n    attributeName: \"transform\",\n    dur: \"1s\",\n    type: \"translate\",\n    values: \"0 15 ; 0 -15; 0 15\",\n    repeatCount: \"indefinite\",\n    begin: 0.1\n  }))), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#166ff8\",\n    stroke: \"none\",\n    cx: 30,\n    cy: 50,\n    r: 6\n  }, /*#__PURE__*/React.createElement(\"animateTransform\", {\n    attributeName: \"transform\",\n    dur: \"1s\",\n    type: \"translate\",\n    values: \"0 10 ; 0 -10; 0 10\",\n    repeatCount: \"indefinite\",\n    begin: 0.2\n  }))), _circle3 || (_circle3 = /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#166ff8\",\n    stroke: \"none\",\n    cx: 54,\n    cy: 50,\n    r: 6\n  }, /*#__PURE__*/React.createElement(\"animateTransform\", {\n    attributeName: \"transform\",\n    dur: \"1s\",\n    type: \"translate\",\n    values: \"0 5 ; 0 -5; 0 5\",\n    repeatCount: \"indefinite\",\n    begin: 0.3\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLoader);\nexport default __webpack_public_path__ + \"static/media/loader.678869c4.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect, ReactElement } from \"react\";\nimport Select from \"react-select\";\n\nimport * as Icon from \"../utils/icons/index\";\nimport { IsoformMapping } from \"../utils/types\";\n\ntype IsoformProps = {\n  isoName?: string;\n  isoform: IsoformMapping[];\n  handleIsoformChange: (value: string) => void;\n};\n\ntype Option = {\n  value: string;\n  label: string | ReactElement;\n  disabled: boolean;\n};\n\ntype Label = {\n  offset: number;\n  isoform: string;\n};\n\nconst LabelComponent = (props: Label) => {\n  const { offset, isoform } = props;\n  return (\n    <>\n      {offset < 0 ? (\n        <div className=\"isoform-info\">\n          {isoform}\n          <img\n            title=\"Isoform mapping not available\"\n            src={Icon.Info}\n            className=\"icon\"\n            alt=\"Info Icon\"\n          />\n        </div>\n      ) : (\n        isoform\n      )}\n    </>\n  );\n};\n\nconst Isoform = ({ isoform, handleIsoformChange }: IsoformProps) => {\n  const [options, setOptions] = useState<Option[]>();\n  const [selectedOption, setSelectedOption] = useState<Option>();\n\n  useEffect(() => {\n    let optionMap: Option[] = [];\n    isoform.map((iso: IsoformMapping) => {\n      let option: Option = {\n        value: iso.isoform,\n        label: <LabelComponent isoform={iso.isoform} offset={iso.offset} />,\n        disabled: iso.offset < 0 ? true : false,\n      };\n      optionMap.push(option);\n    });\n    setOptions(optionMap);\n    setSelectedOption(optionMap[0]);\n  }, [isoform]);\n\n  if (!options) {\n    return <></>;\n  }\n\n  return (\n    <div className=\"isoform-select-wrapper\">\n      <p>Change Isoform</p>\n      <Select\n        className=\"isoform-select\"\n        options={options}\n        value={selectedOption}\n        isOptionDisabled={(option: Option) => option.disabled}\n        defaultValue={selectedOption}\n        onChange={(option) => {\n          handleIsoformChange(option!.value);\n          setSelectedOption(option!);\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Isoform;\n","import React from \"react\";\n\nimport { ReactComponent as LoadingIcon } from \"../utils/icons/loader.svg\";\n\nconst Loader = () => {\n  return (\n    <div className=\"loader\">\n      <LoadingIcon />\n    </div>\n  );\n};\n\nexport default Loader;\n","import React, { useEffect, useState } from \"react\";\nimport { Nextprot, createFeature } from \"feature-viewer\";\n\nimport { featureList } from \"../utils/featureList\";\nimport {\n  getFeaturesByView,\n  getFeaturesByIsoform,\n  addFeatures,\n  getMetadataByView,\n} from \"../utils/helpers/getFeatures\";\nimport Table from \"./Table\";\nimport Isoform from \"./Isoform\";\nimport {\n  FeatsForViewer,\n  FeatureData,\n  IsoformMapping,\n  IsoformType,\n  MetaData,\n  VariantData,\n} from \"../utils/types\";\nimport Loader from \"./Loader\";\nimport { ERROR } from \"../utils/constants\";\nimport { getIsoformList, getPredictions } from \"../utils/service\";\nimport log from \"../utils/helpers/logger\";\n\nconst FeatureViewerComponent = () => {\n  const [data, setData] = useState<VariantData[] | []>([]);\n  const [isoform, setIsoform] = useState<IsoformMapping[]>();\n  const [sequence, setSequence] = useState<IsoformType[]>();\n  const [isoName, setIsoName] = useState<string>();\n  const [features, setFeatures] = useState<FeatsForViewer[]>();\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const CONTAINER_ID = \"fv1\";\n  const nx = new Nextprot.Client(\"Calipho Group\", \"VEP community tool\");\n  let fv: any;\n\n  function buildFeatures(\n    fv: any,\n    sequences: IsoformType[],\n    isoName: string,\n    features: FeatureData[],\n  ) {\n    sequences.forEach(function (seq: IsoformType) {\n      if (seq.uniqueName === isoName) {\n        fv = new createFeature(seq.sequence, \"#fv1\", {\n          showAxis: true,\n          showSequence: true,\n          brushActive: true,\n          toolbar: true,\n          bubbleHelp: true,\n          zoomMax: 10,\n          variant: true,\n        });\n\n        features.map((feat: FeatureData) => {\n          fv.addFeature(feat);\n        });\n\n        fv.onVariantChanged((d: CustomEvent) => {\n          setData([...d.detail]);\n        });\n\n        fv.onGetPredictions((d: CustomEvent) => {\n          let data = {\n            isoform: isoName,\n            variants: d.detail,\n          };\n\n          getPredictions(data).then((res) => {\n            setData(res);\n          });\n        });\n      }\n    });\n  }\n\n  function handleIsoformChange(value: string) {\n    setIsoName(value);\n    document.getElementById(CONTAINER_ID)!.innerHTML = \"\";\n    const featureList: FeatureData[] = addFeatures(features!, value);\n    buildFeatures(fv, sequence!, value, featureList);\n  }\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const paramEntry: string | null = params.get(\"entry\");\n\n    getIsoformList(paramEntry!).then((res) => {\n      setIsoform(res);\n    });\n\n    let sequences: IsoformType[];\n    let features: FeatureData[];\n\n    Promise.all(getFeaturesByView(featureList, nx, paramEntry!))\n      .then((rawData) => {\n        if (rawData) {\n          sequences = rawData[0];\n          const metadata: MetaData[] = getMetadataByView();\n          const featsForViewer: FeatsForViewer[] = getFeaturesByIsoform(\n            rawData,\n            metadata,\n          );\n          features = addFeatures(featsForViewer, sequences[0].isoformAccession);\n          buildFeatures(fv, sequences, sequences[0].isoformAccession, features);\n\n          setSequence(sequences);\n          setFeatures(featsForViewer);\n          setIsoName(sequences[0].isoformAccession);\n          setLoading(false);\n        } else {\n          setError(ERROR.NOT_FOUND);\n        }\n      })\n      .catch((err) => {\n        log(err);\n      });\n  }, []);\n\n  return (\n    <>\n      {loading && <Loader />}\n      <div className=\"viewer-container\">\n        {isoform && !error && (\n          <Isoform\n            isoName={isoName}\n            isoform={isoform}\n            handleIsoformChange={handleIsoformChange}\n          />\n        )}\n        <div id=\"fv1\" />\n        <Table data={data} setData={setData} isoName={isoName} />\n      </div>\n    </>\n  );\n};\n\nexport default FeatureViewerComponent;\n","export default __webpack_public_path__ + \"static/media/nextprot-logo.d0c0c045.png\";","import React from \"react\";\nimport FeatureViewerComponent from \"./components/FeatureViewer\";\nimport nextprotLogo from \"./utils/icons/nextprot-logo.png\";\nimport \"./App.css\";\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <img src={nextprotLogo} className=\"logo\" alt=\"neXtProt logo\" />\n      <FeatureViewerComponent />\n    </div>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(`web-vitals`).then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","/*\n * feature-viewer\n * https://github.com/calipho-sib/feature-viewer\n *\n * Copyright (c) 2015 Calipho - SIB\n * Licensed under the GNU GPL v2 license.\n */\n\n/**\n @class FeatureViewer\n */\n\n\nglobal.jQuery = $ = require(\"jquery\");\nd3 = require(\"d3\");\nrequire(\"bootstrap/js/src/tooltip.js\");\nrequire(\"bootstrap/js/src/popover.js\");\n\nrequire(\"../css/style.css\");\n\nconst createFeature = require(\"../src/feature-viewer.js\");\n \n//Optional : usage with neXtProt\nconst Nextprot = require(\"nextprot/src/nextprot-core.js\");\nconst NXUtils = require(\"nextprot/src/nextprot-utils.js\")[\"NXUtils\"];\nconst NXViewerUtils = require(\"nextprot/src/nextprot-utils.js\")[\"NXViewerUtils\"];\n\n//Optional : usage with neXtProt\nconst nxFeatureViewer = require(\"../src/fv.nextprot.js\");\n\nrequire(\"biojs-events\").mixin(createFeature.prototype);\nmodule.exports = { createFeature, Nextprot, NXUtils, NXViewerUtils, nxFeatureViewer };","const { crossIcon, deleteIcon, bottomArrowIcon } = require('../utils/icons')\nconst { dropdownOptions } = require('../utils/data')\n\nfunction createFeature(sequence, div, options) {\n//        var nxSeq = sequence.startsWith('NX_') ? true : false;\n        var self = this;\n        // if (!div) var div = window;\n        this.events = {\n          FEATURE_SELECTED_EVENT: \"feature-viewer-position-selected\",\n            FEATURE_DESELECTED_EVENT: \"feature-viewer-position-deselected\",\n          ZOOM_EVENT: \"feature-viewer-zoom-altered\",\n          GET_PREDICTIONS_EVENT: \"feature-viewer-vep-predictions\",\n          VARIANT_ADDED_EVENT: \"feature-viewer-variant-added\"\n        };\n\n        // if (!div) var div = window;\n        var div = div;\n        var el = document.getElementById(div.substring(1));\n        var svgElement;\n        var sequence = sequence;\n        var intLength = Number.isInteger(sequence) ? sequence : null;\n        var fvLength = intLength | sequence.length;\n        var features = [];\n        var SVGOptions = {\n            showSequence: false,\n            brushActive: false,\n            verticalLine: false,\n            dottedSequence: true,\n            variant: false\n        };\n        var offset = {start:1,end:fvLength};\n        if (options && options.offset) {\n            offset = options.offset;\n            if (offset.start < 1) {\n                offset.start = 1;\n                console.warn(\"WARNING ! offset.start should be > 0. Thus, it has been reset to 1.\");\n            }\n        }\n        var pathLevel = 0;\n        var svg;\n        var svgContainer;\n        var filter;\n        var yData = [];\n        var yAxisSVG;\n        var yAxisSVGgroup;\n        var Yposition = 20;\n        var level = 0;\n        var seqShift = 0;\n        var zoom = false;\n        var zoomMax = 50;\n        var current_extend = { \n                    length : offset.end - offset.start,\n                    start : offset.start,\n                    end : offset.end\n                }\n        var featureSelected = {};\n        var animation = true;\n        \n        let seqPos; // Stores sequence + its position\n        let absoluteSeqPos; // Store only sequence position\n        let singleVariant = []; // Entered variant values\n        let multipleVariant = [] \n\n        function colorSelectedFeat(feat, object) {\n            //change color && memorize\n            if (featureSelected !== {}) d3.select(featureSelected.id).style(\"fill\", featureSelected.originalColor);\n            if (object.type !== \"path\" && object.type !== \"line\"){\n                featureSelected = {\"id\": feat, \"originalColor\": d3.select(feat).style(\"fill\") || object.color};\n                d3.select(feat).style(\"fill\", \"orangered\");\n            }\n        }\n\n        /**\n         * Private Methods\n         */\n\n            //Init box & scaling\n        d3.select(div)\n            .style(\"position\", \"relative\")\n            .style(\"padding\", \"0px\")\n            .style(\"z-index\", \"2\");\n\n        var margin = {\n                top: 10,\n                right: 20,\n                bottom: 20,\n                left: 110\n            },\n            width = $(div).width() - margin.left - margin.right - 17,\n            height = 600 - margin.top - margin.bottom;\n        var scaling = d3.scale.linear()\n            .domain([offset.start, offset.end])\n            .range([5, width-5]);\n        var scalingPosition = d3.scale.linear()\n            .domain([0, width])\n            .range([offset.start, offset.end]);\n        \n        \n        \n\n        function updateLineTooltip(mouse,pD){\n            var xP = mouse-110;\n            var elemHover = \"\";\n            for (var l=0; l<pD.length;l++) {\n                if (scaling(pD[l].x) < xP && scaling(pD[l+1].x) > xP) {\n                    if ((xP - scaling(pD[l].x)) < (scaling(pD[l+1].x) - xP )) {\n                        elemHover = pD[l];\n                    }\n                    else elemHover = pD[l+1];\n                    break;\n                }\n            }\n            return elemHover;\n        }\n        \n        d3.helper = {};\n\n        d3.helper.tooltip = function (object) {\n            var tooltipDiv;\n            var selectedRect;\n            var bodyNode = d3.select(div).node();\n            var tooltipColor = options.tooltipColor ? options.tooltipColor : \"orangered\";\n\n            function tooltip(selection) {\n\n                selection.on('mouseover.tooltip', function (pD, pI) {\n                    // Clean up lost tooltips\n                    d3.select('body').selectAll('div.tooltip').remove();\n                    // Append tooltip\n                    var absoluteMousePos = d3.mouse(bodyNode);\n                    var rightside = (absoluteMousePos[0] > width);\n                    if (rightside) {\n                        tooltipDiv = d3.select(div)\n                            .append('div')\n                            .attr('class', 'tooltip3');\n                    } else {\n                        tooltipDiv = d3.select(div)\n                            .append('div')\n                            .attr('class', 'tooltip2');\n                        tooltipDiv.style({\n                            left: (absoluteMousePos[0] - 15) + 'px'\n                        });\n                    }\n                    tooltipDiv.style({\n                        bottom: (bodyNode.offsetHeight - absoluteMousePos[1] + 16) + 'px',\n                        'background-color': '#eee',\n                        width: 'auto',\n                        'max-width': '170px',\n                        height: 'auto',\n                        'max-height': '68px',\n                        padding: '5px',\n                        \"font\": '10px sans-serif',\n                        'text-align': 'center',\n                        position: 'absolute',\n                        'z-index': 45,\n                        'box-shadow': '0 1px 2px 0 #656565' \n                    });\n                    if (object.type === \"path\") {\n                        var first_line = '<p style=\"margin:2px;font-weight:700;color:' + tooltipColor +'\">' + pD[0].x + '&#x256d;&#x256e;' + pD[1].x + '</p>';\n                        if (pD.description) var second_line = '<p style=\"margin:2px;color:' + tooltipColor +';font-size:9px\">' + pD.description + '</p>';\n                        else var second_line = '';\n                    } else if (object.type === \"line\") {\n                        var elemHover = updateLineTooltip(absoluteMousePos[0],pD);\n                        if (elemHover.description) {\n                            var first_line = '<p style=\"margin:2px;font-weight:700;color:' + tooltipColor +'\">' + elemHover.x + ' : <span> ' + elemHover.y + '</span></p>';\n                            var second_line = '<p style=\"margin:2px;color:' + tooltipColor +';font-size:9px\">' + elemHover.description + '</p>';\n                        }\n                        else {\n                            var first_line = '<p style=\"margin:2px;color:' + tooltipColor +'\">position : <span id=\"tLineX\">' + elemHover.x + '</span></p>';\n                            var second_line = '<p style=\"margin:2px;color:' + tooltipColor +'\">count : <span id=\"tLineC\">' + elemHover.y + '</span></p>';\n                        }\n                    } else if (object.type === \"unique\" || pD.x === pD.y) {\n                        var first_line = '<p style=\"margin:2px;font-weight:700;color:' + tooltipColor +'\">' + pD.x + '</p>';\n                        if (pD.description) var second_line = '<p style=\"margin:2px;color:' + tooltipColor +';font-size:9px\">' + pD.description + '</p>';\n                        else var second_line = '';\n                    } else {\n                        var first_line = '<p style=\"margin:2px;font-weight:700;color:' + tooltipColor +'\">' + pD.x + ' - ' + pD.y + '</p>';\n                        if (pD.description) var second_line = '<p style=\"margin:2px;color:' + tooltipColor +';font-size:9px\">' + pD.description + '</p>';\n                        else var second_line = '';\n                    }\n\n                    tooltipDiv.html(first_line + second_line);\n                    if (rightside) {\n                        tooltipDiv.style({\n                            left: (absoluteMousePos[0] + 10 - (tooltipDiv.node().getBoundingClientRect().width)) + 'px'\n                        })\n                    }\n                })\n                    .on('mousemove.tooltip', function (pD, pI) {\n                    \n                        if (object.type === \"line\") {\n                            var absoluteMousePos = d3.mouse(bodyNode);\n                            var elemHover = updateLineTooltip(absoluteMousePos[0],pD);\n                            if (elemHover.description) {\n                                var first_line = '<p style=\"margin:2px;color:' + tooltipColor +'\">' + elemHover.x + ' : <span> ' + elemHover.y + '</span></p>';\n                                var second_line = '<p style=\"margin:2px;color:' + tooltipColor +';font-size:9px\">' + elemHover.description + '</p>';\n                            }\n                            else {\n                                var first_line = '<p style=\"margin:2px;color:' + tooltipColor +'\">position : <span id=\"tLineX\">' + elemHover.x + '</span></p>';\n                                var second_line = '<p style=\"margin:2px;color:' + tooltipColor +'\">count : <span id=\"tLineC\">' + elemHover.y + '</span></p>';\n                            }\n                            tooltipDiv.html(first_line + second_line);\n//                            $('#tLineX').text(elemHover.x);\n//                            $('#tLineC').text(elemHover.y);  \n                        }\n                        // Move tooltip\n                        // IE 11 sometimes fires mousemove before mouseover\n                        if (tooltipDiv === undefined) { return; }\n                        var absoluteMousePos = d3.mouse(bodyNode);\n                        var rightside = (absoluteMousePos[0] > width);\n                        if (rightside) {\n                            tooltipDiv.attr(\"class\", \"tooltip3\");\n                            tooltipDiv.style({\n                                left: (absoluteMousePos[0] + 10 - (tooltipDiv.node().getBoundingClientRect().width)) + 'px',\n                                bottom: (bodyNode.offsetHeight - absoluteMousePos[1] + 16) + 'px'\n                            });\n                        } else {\n                            tooltipDiv.attr(\"class\", \"tooltip2\");\n                            tooltipDiv.style({\n                                left: (absoluteMousePos[0] - 15) + 'px',\n                                bottom: (bodyNode.offsetHeight - absoluteMousePos[1] + 16) + 'px'\n                            })\n                        }\n                    })\n                    .on('mouseout.tooltip', function (pD, pI) {\n                        // Remove tooltip\n                        tooltipDiv.remove();\n                    })\n                    .on('click', function (pD, pI) {\n                        var xTemp;\n                        var yTemp;\n                        var xRect;\n                        var widthRect;\n                        var elemHover;\n\n                        if(this.nodeName === \"text\") {\n                            var rect = \"#\"+this.previousSibling.id;\n                            if(rect.nodeName !== \"#\") colorSelectedFeat(rect, object);\n                        }\n                        else colorSelectedFeat(this, object);\n\n                        var svgWidth = SVGOptions.brushActive ? d3.select(\".background\").attr(\"width\") : svgContainer.node().getBBox().width;\n                        d3.select('body').selectAll('div.selectedRect').remove();\n                        // Append tooltip\n                        selectedRect = d3.select(div)\n                            .append('div')\n                            .attr('class', 'selectedRect');\n                        if (object.type === \"path\") {\n                            xTemp = pD[0].x;\n                            yTemp = pD[1].x;\n                        } else if (object.type === \"line\") {\n                            var absoluteMousePos = d3.mouse(bodyNode);\n                            elemHover = updateLineTooltip(absoluteMousePos[0],pD);\n                            xTemp = elemHover.x - 0.5;\n                            yTemp = elemHover.x + 0.5;\n                        } else if (object.type === \"unique\" || pD.x === pD.y) {\n                            xTemp = pD.x - 0.4;\n                            yTemp = pD.y + 0.4;\n                        } else {\n                            xTemp = pD.x;\n                            yTemp = pD.y;\n                        }\n\n                        if (scaling(xTemp) < 0 && scaling(yTemp) > svgWidth) {\n                            xRect = margin.left;\n                            widthRect = parseInt(svgWidth) + 5;\n                        } else if (scaling(xTemp) < 0) {\n                            xRect = margin.left;\n                            widthRect = (scaling(yTemp));\n                        } else if (scaling(yTemp) > svgWidth) {\n                            xRect = scaling(xTemp) + margin.left;\n                            widthRect = parseInt(svgWidth) - scaling(xTemp);\n                            widthRect =  widthRect + 5;\n                        } else {\n                            xRect = scaling(xTemp) + margin.left;\n                            widthRect = (scaling(yTemp) - scaling(xTemp));\n                        }\n                        selectedRect.style({\n                            left: xRect + 'px',\n                            top: ($(div + \" .svgHeader\").length) ? 60 + 'px' : 10 + 'px',\n                            'background-color': 'rgba(0, 0, 0, 0.2)',\n                            width: widthRect + 'px',\n                            height: (Yposition + 50) + 'px',\n                            position: 'absolute',\n                            'z-index': -1,\n                            'box-shadow': '0 1px 2px 0 #656565'\n                        });\n\n                        if (CustomEvent) {\n                            var event = new CustomEvent(self.events.FEATURE_SELECTED_EVENT, {\n                                detail: {\n                                    start: object.type === \"path\" ? pD[0].x : object.type === \"line\" ? elemHover.x : pD.x,\n                                    end: object.type === \"path\" ? pD[1].x : object.type === \"line\" ? elemHover.y : pD.y,\n                                    id: object.type === \"path\" ? pD[0].id : object.type === \"line\" ? elemHover.id : pD.id,\n                                    description:object.type === \"path\" ? pD[0].description : object.type === \"line\" ? elemHover.description : pD.description\n                                }\n                            });\n                            svgElement.dispatchEvent(event);\n                        } else {\n                            console.warn(\"CustomEvent is not defined....\");\n                        }\n                        if (self.trigger) self.trigger(self.events.FEATURE_SELECTED_EVENT, {\n                            start: object.type === \"path\" ? pD[0].x : object.type === \"line\" ? elemHover.x : pD.x,\n                            end: object.type === \"path\" ? pD[1].x : object.type === \"line\" ? elemHover.y : pD.y,\n                            id: object.type === \"path\" ? pD[0].id : object.type === \"line\" ? elemHover.id : pD.id,\n                            description:object.type === \"path\" ? pD[0].description : object.type === \"line\" ? elemHover.description : pD.description\n                        });\n\n                    });\n            }\n\n            tooltip.attr = function (_x) {\n                if (!arguments.length) return attrs;\n                attrs = _x;\n                return this;\n            };\n\n            tooltip.style = function (_x) {\n                if (!arguments.length) return styles;\n                styles = _x;\n                return this;\n            };\n\n            return tooltip;\n        };\n\n        //COMPUTING FUNCTION\n        var X = function (d) {\n            return scaling(d.x);\n        };\n        var displaySequence = function (seq) {\n            return width / seq > 5;\n        };\n        var rectWidth = function (d) {\n            return (scaling(d.y) - scaling(d.x));\n        };\n        function rectX(object) {\n            if (object.x === object.y) {\n                return scaling(object.x-0.4);\n            }\n            return scaling(object.x);\n        };\n        function rectWidth2(d){\n            if (d.x === d.y) {\n                if (scaling(d.x + 0.4) - scaling(d.x - 0.4) < 2) return 2;\n                else return scaling(d.x + 0.4) - scaling(d.x - 0.4);\n            }\n            return (scaling(d.y) - scaling(d.x));\n        };\n        var uniqueWidth = function (d) {\n            return (scaling(1));\n        };\n\n        this.onFeatureSelected = function (listener) {\n            svgElement.addEventListener(self.events.FEATURE_SELECTED_EVENT, listener);\n        };\n        this.onFeatureDeselected = function (listener) {\n            svgElement.addEventListener(self.events.FEATURE_DESELECTED_EVENT, listener);\n        };\n\n        this.onZoom = function (listener) {\n            svgElement.addEventListener(self.events.ZOOM_EVENT, listener);\n        };\n        this.onGetPredictions = function (listener) {\n            svgElement.addEventListener(self.events.GET_PREDICTIONS_EVENT, listener);\n        }\n        this.onVariantChanged = function (listener) {\n            svgElement.addEventListener(self.events.VARIANT_ADDED_EVENT, listener);\n        }\n\n        function addLevel(array) {\n            var leveling = [];\n            array.forEach(function (d) {\n                if (leveling === []) {\n                    leveling.push(d.y);\n                    d.level = 0;\n                } else {\n                    var placed = false;\n                    for (var k = 0; k < leveling.length; k++) {\n                        if (d.x > leveling[k]) {\n                            placed = true;\n                            d.level = k;\n                            leveling[k] = d.y;\n                            break;\n                        }\n                    }\n                    if (placed === false) {\n                        leveling.push(d.y);\n                        d.level = leveling.length - 1;\n                    }\n                }\n            });\n            return leveling.length;\n        }\n\n        function addLevelToBond(array) {\n            var leveling = [];\n            var newArray = [];\n            array.forEach(function (d) {\n                if (leveling === []) {\n                    leveling.push(d[2].x);\n                    d[1].y = 1;\n                } else {\n                    var placed = false;\n                    for (var k = 0; k < leveling.length; k++) {\n                        if (d[0].x > leveling[k]) {\n                            placed = true;\n                            d[1].y = k + 1;\n                            leveling[k] = d[2].x;\n                            break;\n                        }\n                    }\n                    if (placed === false) {\n                        leveling.push(d[2].x);\n                        d[1].y = leveling.length;\n                    }\n                }\n            });\n            return leveling.length;\n        }\n\n        var lineBond = d3.svg.line()\n            .interpolate(\"step-before\")\n            .x(function (d) {\n                return scaling(d.x);\n            })\n            .y(function (d) {\n                return -d.y * 10 + pathLevel;\n            });\n        var lineGen = d3.svg.line()\n          \n//          .interpolate(\"cardinal\")\n          .x(function(d) {\n            return scaling(d.x);\n          })\n          .y(function (d) {\n                return lineYscale(-d.y) * 10 + pathLevel;\n            });\n        var lineYscale = d3.scale.linear()\n            .domain([0,-30])\n            .range([0,-20]);\n        var line = d3.svg.line()\n            .interpolate(\"linear\")\n            .x(function (d) {\n                return scaling(d.x);\n            })\n            .y(function (d) {\n                return d.y + 6;\n            });\n\n        //Create Axis\n        var xAxis = d3.svg.axis()\n            .scale(scaling)\n            .tickFormat(d3.format(\"d\"))\n            .orient(\"bottom\");\n        \n        function shadeBlendConvert(p, from, to) {\n            if(typeof(p)!=\"number\"||p<-1||p>1||typeof(from)!=\"string\"||(from[0]!='r'&&from[0]!='#')||(typeof(to)!=\"string\"&&typeof(to)!=\"undefined\"))return null; //ErrorCheck\n            if(!this.sbcRip)this.sbcRip=function(d){\n                var l=d.length,RGB=new Object();\n                if(l>9){\n                    d=d.split(\",\");\n                    if(d.length<3||d.length>4)return null;//ErrorCheck\n                    RGB[0]=i(d[0].slice(4)),RGB[1]=i(d[1]),RGB[2]=i(d[2]),RGB[3]=d[3]?parseFloat(d[3]):-1;\n                }else{\n                    if(l==8||l==6||l<4)return null; //ErrorCheck\n                    if(l<6)d=\"#\"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+(l>4?d[4]+\"\"+d[4]:\"\"); //3 digit\n                    d=i(d.slice(1),16),RGB[0]=d>>16&255,RGB[1]=d>>8&255,RGB[2]=d&255,RGB[3]=l==9||l==5?r(((d>>24&255)/255)*10000)/10000:-1;\n                }\n                return RGB;}\n            var i=parseInt,r=Math.round,h=from.length>9,h=typeof(to)==\"string\"?to.length>9?true:to==\"c\"?!h:false:h,b=p<0,p=b?p*-1:p,to=to&&to!=\"c\"?to:b?\"#000000\":\"#FFFFFF\",f=sbcRip(from),t=sbcRip(to);\n            if(!f||!t)return null; //ErrorCheck\n            if(h)return \"rgb(\"+r((t[0]-f[0])*p+f[0])+\",\"+r((t[1]-f[1])*p+f[1])+\",\"+r((t[2]-f[2])*p+f[2])+(f[3]<0&&t[3]<0?\")\":\",\"+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*10000)/10000:t[3]<0?f[3]:t[3])+\")\");\n            else return \"#\"+(0x100000000+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*255):t[3]>-1?r(t[3]*255):f[3]>-1?r(f[3]*255):255)*0x1000000+r((t[0]-f[0])*p+f[0])*0x10000+r((t[1]-f[1])*p+f[1])*0x100+r((t[2]-f[2])*p+f[2])).toString(16).slice(f[3]>-1||t[3]>-1?1:3);\n        }\n\n        function addXAxis(position) {\n            svgContainer.append(\"g\")\n                .attr(\"class\", \"x axis Xaxis\")\n                .attr(\"transform\", \"translate(0,\" + (position + 20) + \")\")\n                .call(xAxis);\n        }\n\n        function updateXaxis(position) {\n            svgContainer.selectAll(\".Xaxis\")\n                .attr(\"transform\", \"translate(0,\" + (position + 20) + \")\")\n        }\n\n        function updateSVGHeight(position) {\n            svg.attr(\"height\", position + 60 + \"px\");\n            svg.select(\"clippath rect\").attr(\"height\", position + 60 + \"px\");\n        }\n\n        var yAxisScale = d3.scale.ordinal()\n            .domain([0, yData.length])\n            .rangeRoundBands([0, 500], .1);\n        var yAxis = d3.svg.axis()\n            .scale(yAxisScale)\n            .tickValues(yData) //specify an array here for values\n            .tickFormat(function (d) {\n                return d\n            })\n            .orient(\"left\");\n\n        function addYAxis() {\n            yAxisSVG = svg.append(\"g\")\n                .attr(\"class\", \"pro axis\")\n                .attr(\"transform\", \"translate(0,\" + margin.top + \")\");\n            updateYaxis();\n        }\n\n        function updateYaxis() {\n\n            yAxisSVGgroup = yAxisSVG\n                .selectAll(\".yaxis\")\n                .data(yData)\n                .enter()\n                .append(\"g\");\n            yAxisSVGgroup\n                .append(\"polygon\") // attach a polygon\n                .attr(\"class\", function (d) {\n                    if (d.filter) return d.filter.split(\" \").join(\"_\") + \"Arrow\";\n                    return \"Arrow\";\n                })\n                .style(\"stroke\", \"\") // colour the line\n                .style(\"fill\", \"#DFD5D3\") // remove any fill colour\n                .attr(\"points\", function (d) {\n                    return (margin.left - 105) + \",\" + (d.y - 3) + \", \" + (margin.left - 105) + \",\" + (d.y + 12) + \", \" + (margin.left - 15) + \",\" + (d.y + 12) + \", \" + (margin.left - 7) + \",\" + (d.y + 4.5) + \", \" + (margin.left - 15) + \",\" + (d.y -3); // x,y points\n                });\n            yAxisSVGgroup\n                .append(\"text\")\n                .attr(\"class\", \"yaxis\")\n                .attr(\"text-anchor\", \"start\")\n                .attr(\"x\", function () {\n                    return margin.left - 102\n                })\n                .attr(\"y\", function (d) {\n                    return d.y + 8\n                })\n                .text(function (d) {\n                    return d.title\n                });\n        }\n\n        function forcePropagation(item) {\n            item.on('mousedown', function () {\n                brush_elm = svg.select(\".brush\").node();\n                new_click_event = new Event('mousedown');\n                new_click_event.pageX = d3.event.pageX;\n                new_click_event.clientX = d3.event.clientX;\n                new_click_event.pageY = d3.event.pageY;\n                new_click_event.clientY = d3.event.clientY;\n                if (brush_elm) {\n                    brush_elm.dispatchEvent(new_click_event);\n                }\n            });\n        }\n\n        /** export to new utils file  */\n        var preComputing = {\n            path: function (object) {\n                object.data.sort(function (a, b) {\n                    return a.x - b.x;\n                });\n                var level = addLevel(object.data);\n                object.data = object.data.map(function (d) {\n                    return [{\n                        x: d.x,\n                        y: 0,\n                        id: d.id,\n                        description: d.description,\n                        color: d.color\n                    }, {\n                        x: d.y,\n                        y: d.level + 1,\n                        id: d.id\n                    }, {\n                        x: d.y,\n                        y: 0,\n                        id: d.id\n                    }]\n                })\n                pathLevel = level * 10 + 5;\n                object.height = level * 10 + 5;\n            },\n            line: function (object) {\n                if (!object.height) object.height = 10;\n                var shift = parseInt(object.height);\n                var level = 0;\n                for (var i in object.data) {\n                    object.data[i].sort(function (a, b) {\n                        return a.x - b.x;\n                    });\n                    if (object.data[i][0].y !== 0) {\n                        object.data[i].unshift({\n                            x:object.data[i][0].x-1,\n                            y:0\n                        })\n                    }\n                    if (object.data[i][object.data[i].length -1].y !== 0){\n                        object.data[i].push({\n                            x:object.data[i][object.data[i].length -1].x+1,\n                            y:0\n                        })\n                    }\n                    var maxValue = Math.max.apply(Math,object.data[i].map(function(o){return Math.abs(o.y);}));\n                    level = maxValue > level ? maxValue : level;\n                    \n\n                    object.data[i] = [object.data[i].map(function (d) {\n                        return {\n                            x: d.x,\n                            y: d.y,\n                            id: d.id,\n                            description: d.description\n                        }\n                    })]\n                }\n                lineYscale.range([0, -(shift)]).domain([0, -(level)]);\n                pathLevel = shift * 10 +5;\n                object.level = level;\n                object.shift = shift * 10 +5;\n            },\n            multipleRect: function (object) {\n                object.data.sort(function (a, b) {\n                    return a.x - b.x;\n                });\n                level = addLevel(object.data);\n                pathLevel = level * 10 + 5;\n            }\n        };\n\n        var fillSVG = {\n            typeIdentifier: function (object) {\n                if (object.type === \"rect\") {\n                    preComputing.multipleRect(object);\n                    yData.push({\n                        title: object.name,\n                        y: Yposition,\n                        filter: object.filter\n                    });\n                    fillSVG.rectangle(object, Yposition);\n                } else if (object.type === \"text\") {\n                    fillSVG.sequence(object.data, Yposition);\n                    yData.push({\n                        title: object.name,\n                        y: Yposition,\n                        filter: object.filter\n                    });\n                    scaling.range([5, width-5]);\n                } else if (object.type === \"unique\") {\n                    fillSVG.unique(object, Yposition);\n                    yData.push({\n                        title: object.name,\n                        y: Yposition,\n                        filter: object.filter\n                    });\n                } else if (object.type === \"multipleRect\") {\n                    preComputing.multipleRect(object);\n                    fillSVG.multipleRect(object, Yposition, level);\n                    yData.push({\n                        title: object.name,\n                        y: Yposition,\n                        filter: object.filter\n                    });\n                    Yposition += (level - 1) * 10;\n                } else if (object.type === \"path\") {\n                    preComputing.path(object);\n                    fillSVG.path(object, Yposition);\n                    Yposition += pathLevel;\n                    yData.push({\n                        title: object.name,\n                        y: Yposition - 10,\n                        filter: object.filter\n                    });\n                } else if (object.type === \"line\") {\n                    if (!(Array.isArray(object.data[0]))) object.data = [object.data];\n                    if (!(Array.isArray(object.color))) object.color = [object.color];\n                    var negativeNumbers = false;\n                    object.data.forEach(function(d){\n                        if (d.filter(function(l){ return l.y < 0}).length) negativeNumbers = true;\n                    });\n                    preComputing.line(object);\n                    fillSVG.line(object, Yposition);\n                    Yposition += pathLevel;\n                    yData.push({\n                        title: object.name,\n                        y: Yposition - 10,\n                        filter: object.filter\n                    });\n                    Yposition += negativeNumbers ? pathLevel-5 : 0;\n                }\n            },\n            sequence: function (seq, position, start) {\n                //Create group of sequence\n                if (!start) var start = 0;\n\n                let seqSelected;\n                let error = \"\";\n\n                svgContainer.append(\"g\")\n                    .attr(\"class\", \"seqGroup\")\n                    .selectAll(\".AA\")\n                    .data(seq)\n                    .enter()\n                    .append(\"text\", function() {\n                        return d + '-' + i\n                    })\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"class\", \"AA\")\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"x\", function (d, i) {\n                        return scaling.range([5, width-5])(i + start)\n                    })\n                    .attr(\"y\", position)\n                    .attr(\"font-size\", \"10px\")\n                    .attr(\"font-family\", \"monospace\")\n                    .text(function (d, i) {\n                        return d\n                    })\n                    .on(\"click\", function(e) {\n                        seqSelected = e;\n                        const width = $(window).width();\n                        const posX = this.getBoundingClientRect().x;\n\n                        const divPos = calculatePos(width, posX)\n                        showPopup(true, divPos)\n                    })\n                    \n                let optionsHeader = $(div + \" .svgHeader\").length ? d3.select(div + \" .svgHeader\") : d3.select(div).append(\"div\").attr(\"class\", \"svgHeader\");\n\n                let singlePopup = optionsHeader.append(\"div\") \n                    .attr(\"class\", \"single-variant-popup\")\n     \n                    singlePopup.append('svg')\n                    .attr(\"class\", \"cancel-icon\")\n                    .attr(\"height\", \"1.5rem\")\n                    .attr(\"width\", \"1.5rem\")                \n                    .attr(\"viewBox\",\"0 0 512 640\")\n                    .on(\"click\", function() {\n                        showPopup(false)\n                        $(`#single-dropdown-content`).hide()\n                    })\n                    .html(crossIcon)\n                 \n                    let popupContainer = singlePopup.append(\"div\")\n                    \n                    popupContainer.html(`\n                        <p>Enter the variants</p>\n                        <div class=\"properties-row\">\n                            <p class=\"title\">Position</p>\n                            <div class=\"single-variant-nextprotPosition\"></div>\n                        </div>\n                        <div class=\"properties-row\">\n                            <p class=\"title\">Original</p>\n                            <div class=\"single-variant-original\"></div>\n                        </div>\n                    `)\n\n                    const dropdown = popupContainer\n                    .append(\"div\")\n                    .attr(\"class\", \"properties-row\")\n\n                    dropdown.append(\"p\")\n                    .attr(\"class\", \"title\")\n                    .text(\"Variant\")\n\n                    let dropdownWrapper = dropdown.append(\"div\")\n                    .attr(\"class\", \"dropdown\")\n\n                    dropdownWrapper\n                    .append(\"button\")\n                    .attr(\"class\", \"dropdown-btn\")\n                    .attr(\"id\", \"single-variant-dropdown-btn\")\n                    .text(\"Select variant\")\n                    .on(\"click\", function() {\n                        $(`#single-dropdown-content`).toggle()\n                    })\n                    \n                    dropdownWrapper.append(\"div\")\n                    .attr(\"class\", \"bottom-arrow-icon\")\n                    .html(bottomArrowIcon)\n\n                    const dropdownContainer = dropdownWrapper.append(\"div\")\n                    .attr(\"id\", function() {\n                        return 'single-dropdown-content';\n                    })   \n\n                    popupContainer.append(\"p\")\n                    .attr(\"class\", \"error\")\n                    .attr(\"id\", \"single-variant-error\")\n                    .text(error)\n\n                    popupContainer.append(\"button\")\n                    .attr(\"disabled\", true)\n                    .attr(\"class\", \"single-add-variant-btn\")\n                    .text(\"Add Variant\")\n                    .on(\"click\", function() {\n                        let value = $('#single-variant-dropdown-btn').text()\n                        addVariant(value)\n                    })\n                    \n                    dropdownContainer.append(\"input\")\n                    .attr(\"placeholder\", \"Search...\")\n                    .attr(\"id\", \"dropdown-search-input\")\n                    .on(\"keyup\", function() {\n                        let input, filter, p, i, div, txtValue;\n                        input = document.getElementById(\"dropdown-search-input\");\n                        filter = input.value.toUpperCase();\n                        div = document.getElementById(\"dropdown-options\");\n                        p = div.getElementsByTagName(\"p\");\n\n                        for (i = 0; i < p.length; i++) {\n                            txtValue = p[i].textContent || p[i].innerText;\n                            if (txtValue.toUpperCase().indexOf(filter) > -1) {\n                              p[i].style.display = \"\";\n                            } else {\n                              p[i].style.display = \"none\";\n                            }\n                          }\n                    })\n\n                    let dropdownOptionContainer = dropdownContainer.append(\"div\")\n                                                .attr(\"class\", \"dropdown-option-container\")\n                                                .attr(\"id\", \"dropdown-options\")\n\n                    Object.entries(dropdownOptions).forEach(([key, value]) => {\n                        dropdownOptionContainer.append(\"p\")\n                        .attr(\"class\", \"single-dropdown-options\")\n                        .attr(\"id\", `${key} / ${value}`)\n                        .text(`${key} / ${value}`)\n                    })        \n                    \n                    $(document).on('click', '.single-dropdown-options', function () {\n                        const value = $(this).attr('id');\n                        $('#single-dropdown-content').hide()\n                        let variantAminoAcid = value.split(\" /\")[0];\n                        if(seqSelected === variantAminoAcid) {\n                            error = \"Original value cannot be same as variant\";\n                            $('#single-variant-error').text(error);\n                            return;\n                        }\n                        $('#single-variant-error').text(\"\");\n                        variantValue = value;\n                        $(this).parent().parent().parent().children('button').text(function() {\n                            return value\n                        });\n                        $(\".single-add-variant-btn\").attr('disabled', false);\n                    })\n\n                /**\n                 * Add variant and call onVariantChanged Event\n                 * @param {number} variantValue - Variant value\n                */\n\n                 function addVariant(variantValue) {\n                    if(variantValue === \"\") {\n                        console.log(\"Variant not added\")\n                        return;\n                    }\n                    let variantAminoAcid = variantValue.split(\" /\")[0];\n                    let values = {};\n                    let nextprotPosition = $('.single-variant-nextprotPosition').text();\n\n                    values.nextprotPosition = Number(nextprotPosition);\n                    values['originalAminoAcid'] = seqSelected;\n                    values['variantAminoAcid'] = variantAminoAcid;\n                    singleVariant.push(values)\n\n                    callOnVariantChanged()\n                 }\n\n                \n                /**\n                 * Show the single variant entry popup\n                 * @param {number} show - Show/hide the popup\n                 * @param {number} divPos - Position of popup \n                 */\n\n                function showPopup (show, divPos) {\n                    // reset default value\n                    $('#single-variant-dropdown-btn').text(\"Select variant\")\n                    variantValue = \"\";\n                    error = \"\";\n                    $('#single-variant-error').text(error);\n                    $(\".single-add-variant-btn\").attr('disabled', true);\n\n\n                    $(\".single-variant-nextprotPosition\").text(function() {\n                        return absoluteSeqPos\n                    })\n\n                    $(\".single-variant-original\").text(function() {\n                        return `${seqSelected} / ${dropdownOptions[seqSelected]}`\n                    })\n                    \n                    singlePopup\n                    .style(\"left\", `${divPos}px`)\n                    .style(\"display\", show ? \"block\" : \"none\")\n                }\n\n                 /**\n                 * Calculate the position of popup\n                 * @param {number} width - Screen width of client\n                 * @param {number} posX - Position of sequence clicked (in px)\n                 */\n\n                function calculatePos(width, posX) {\n                    const margin = 800;\n                    if(width - posX < margin) return width - (margin/2 + (width-posX));\n                    \n                    return posX;\n                }\n            },\n            sequenceLine: function () {\n                //Create line to represent the sequence\n                if (SVGOptions.dottedSequence){\n                    var dottedSeqLine = svgContainer.selectAll(\".sequenceLine\")\n                        .data([[{x:1,y:12},{x:fvLength,y:12}]])\n                        .enter()\n                        .append(\"path\")\n                        .attr(\"clip-path\", \"url(#clip)\")\n                        .attr(\"d\", line)\n                        .attr(\"class\",\"sequenceLine\")\n                        .style(\"z-index\", \"0\")\n                        .style(\"stroke\", \"black\")\n                        .style(\"stroke-dasharray\",\"1,3\")\n                        .style(\"stroke-width\", \"1px\")\n                        .style(\"stroke-opacity\",0);\n\n                    dottedSeqLine\n                        .transition()\n                        .duration(500)\n                        .style(\"stroke-opacity\", 1);\n                }\n            },\n            rectangle: function (object, position) {\n                //var rectShift = 20;\n                if (!object.height) object.height = 12;\n                var rectHeight = object.height;\n                \n                var rectShift = rectHeight + rectHeight/3;\n                var lineShift = rectHeight/2 - 6;\n//                var lineShift = rectHeight/2 - 6;\n\n                var rectsPro = svgContainer.append(\"g\")\n                    .attr(\"class\", \"rectangle\")\n                    .attr(\"transform\", \"translate(0,\" + position + \")\");\n                \n                var dataline=[];\n                for (var i = 0; i < level; i++) {\n                    dataline.push([{\n                            x: 1,\n                            y: (i * rectShift + lineShift)\n                        }, {\n                            x: fvLength,\n                            y: (i * rectShift + lineShift)\n                        }]);\n                }\n                rectsPro.selectAll(\".line\" + object.className)\n                    .data(dataline)\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"d\", line)\n                    .attr(\"class\", function () {\n                        return \"line\" + object.className\n                    })\n                    .style(\"z-index\", \"0\")\n                    .style(\"stroke\", object.color)\n                    .style(\"stroke-width\", \"1px\");\n\n\n                var rectsProGroup = rectsPro.selectAll(\".\" + object.className + \"Group\")\n                    .data(object.data)\n                    .enter()\n                    .append(\"g\")\n                    .attr(\"class\", object.className + \"Group\")\n                    .attr(\"transform\", function (d) {\n                        return \"translate(\" + rectX(d) + \",0)\"\n                    });\n\n                rectsProGroup\n                    .append(\"rect\")\n                    .attr(\"class\", \"element \" + object.className)\n                    .attr(\"id\", function (d) {\n                        return \"f\" + d.id\n                    })\n                    .attr(\"y\", function (d) {\n                        return d.level * rectShift\n                    })\n                    .attr(\"width\", rectWidth2)\n                    .attr(\"height\", rectHeight)\n                    .style(\"fill\", function(d) { return d.color || object.color })\n                    .style(\"z-index\", \"13\")\n                    .call(d3.helper.tooltip(object));\n\n                rectsProGroup\n                    .append(\"text\")\n                    .attr(\"class\", \"element \" + object.className + \"Text\")\n                    .attr(\"y\", function (d) {\n                        return d.level * rectShift + rectHeight/2\n                    })\n                    .attr(\"dy\", \"0.35em\")\n                    .style(\"font-size\", \"10px\")\n                    .text(function (d) {\n                        return d.description\n                    })\n                    .style(\"fill\", \"black\")\n                    .style(\"z-index\", \"15\")\n                    .style(\"visibility\", function (d) {\n                        if (d.description) {\n                            return (scaling(d.y) - scaling(d.x)) > d.description.length * 8 && rectHeight > 11 ? \"visible\" : \"hidden\";\n                        } else return \"hidden\";\n                    })\n                    .call(d3.helper.tooltip(object));\n\n\n                //rectsPro.selectAll(\".\" + object.className)\n                //    .data(object.data)\n                //    .enter()\n                //    .append(\"rect\")\n                //    .attr(\"clip-path\", \"url(#clip)\")\n                //    .attr(\"class\", \"element \"+object.className)\n                //    .attr(\"id\", function(d) { return \"f\"+d.id })\n                //    .attr(\"x\", X)\n                //    .attr(\"width\", rectWidth)\n                //    .attr(\"height\", 12)\n                //    .style(\"fill\", object.color)\n                //    .style(\"z-index\", \"13\")\n                //    .call(d3.helper.tooltip(object));\n\n                forcePropagation(rectsProGroup);\n                var uniqueShift = rectHeight > 12 ? rectHeight - 6 : 0;\n                Yposition += level < 2 ? uniqueShift : (level-1) * rectShift + uniqueShift;\n            },\n            unique: function (object, position) {\n                var rectsPro = svgContainer.append(\"g\")\n                    .attr(\"class\", \"uniquePosition\")\n                    .attr(\"transform\", \"translate(0,\" + position + \")\");\n\n                var dataline=[];\n                dataline.push([{\n                        x: 1,\n                        y: 0\n                    }, {\n                        x: fvLength,\n                        y: 0\n                    }]);\n                \n                rectsPro.selectAll(\".line\" + object.className)\n                    .data(dataline)\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"d\", line)\n                    .attr(\"class\", \"line\" + object.className)\n                    .style(\"z-index\", \"0\")\n                    .style(\"stroke\", object.color)\n                    .style(\"stroke-width\", \"1px\");\n\n                rectsPro.selectAll(\".\" + object.className)\n                    .data(object.data)\n                    .enter()\n                    .append(\"rect\")\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"class\", \"element \" + object.className)\n                    .attr(\"id\", function (d) {\n                        return \"f\" + d.id\n                    })\n                    .attr(\"x\", function (d) {\n                        return scaling(d.x - 0.4)\n                    })\n                    .attr(\"width\", function (d) {\n                        if (scaling(d.x + 0.4) - scaling(d.x - 0.4) < 2) return 2;\n                        else return scaling(d.x + 0.4) - scaling(d.x - 0.4);\n                    })\n                    .attr(\"height\", 12)\n                    .style(\"fill\", function(d) {return d.color ||  object.color})\n                    .style(\"z-index\", \"3\")\n                    .call(d3.helper.tooltip(object));\n\n                forcePropagation(rectsPro);\n            },\n            path: function (object, position) {\n                var pathsDB = svgContainer.append(\"g\")\n                    .attr(\"class\", \"pathing\")\n                    .attr(\"transform\", \"translate(0,\" + position + \")\");\n\n                var dataline=[];\n                dataline.push([{\n                        x: 1,\n                        y: 0\n                    }, {\n                        x: fvLength,\n                        y: 0\n                    }]);\n                \n                pathsDB.selectAll(\".line\" + object.className)\n                    .data(dataline)\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"d\", lineBond)\n                    .attr(\"class\", \"line\" + object.className)\n                    .style(\"z-index\", \"0\")\n                    .style(\"stroke\", object.color)\n                    .style(\"stroke-width\", \"1px\");\n\n                pathsDB.selectAll(\".\" + object.className)\n                    .data(object.data)\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"class\", \"element \" + object.className)\n                    .attr(\"id\", function (d) {\n                        return \"f\" + d[0].id\n                    })\n                    .attr(\"d\", lineBond)\n                    .style(\"fill\", \"none\")\n                    .style(\"stroke\", function(d) {return d[0].color || object.color})\n                    .style(\"z-index\", \"3\")\n                    .style(\"stroke-width\", \"2px\")\n                    .call(d3.helper.tooltip(object));\n\n                forcePropagation(pathsDB);\n            },\n            line: function (object, position) {\n                if (!object.interpolation) object.interpolation = \"monotone\";\n                if (object.fill === undefined) object.fill = true;\n                var histog = svgContainer.append(\"g\")\n                    .attr(\"class\", \"lining\")\n                    .attr(\"transform\", \"translate(0,\" + position + \")\");\n\n                var dataline=[];\n                dataline.push([{\n                        x: 1,\n                        y: 0\n                    }, {\n                        x: fvLength,\n                        y: 0\n                    }]);\n                \n                histog.selectAll(\".line\" + object.className)\n                    .data(dataline)\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"d\", lineBond)\n                    .attr(\"class\", \"line\" + object.className)\n                    .style(\"z-index\", \"0\")\n                    .style(\"stroke\", \"black\")\n                    .style(\"stroke-width\", \"1px\");\n                object.data.forEach(function(dd,i,array){\n                    histog.selectAll(\".\" + object.className + i)\n                    .data(dd)\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"class\", \"element \" + object.className + \" \" + object.className + i)\n                    .attr(\"d\", lineGen.interpolate(object.interpolation))\n                    .style(\"fill\", object.fill ? shadeBlendConvert(0.6, object.color[i]) || shadeBlendConvert(0.6, \"#000\") : \"none\")\n                    .style(\"stroke\", object.color[i] || \"#000\")\n                    .style(\"z-index\", \"3\")\n                    .style(\"stroke-width\", \"2px\")\n//                    .style(\"shape-rendering\", \"crispEdges\")\n                    .call(d3.helper.tooltip(object));\n                })\n                \n                forcePropagation(histog);\n            },\n            multipleRect: function (object, position, level) {\n                var rectHeight = 8;\n                var rectShift = 10;\n                var rects = svgContainer.append(\"g\")\n                    .attr(\"class\", \"multipleRects\")\n                    .attr(\"transform\", \"translate(0,\" + position + \")\");\n\n                for (var i = 0; i < level; i++) {\n                    rects.append(\"path\")\n                        .attr(\"d\", line([{\n                            x: 1,\n                            y: (i * rectShift - 2)\n                        }, {\n                            x: fvLength,\n                            y: (i * rectShift - 2)\n                        }]))\n                        .attr(\"class\", function () {\n                            return \"line\" + object.className\n                        })\n                        .style(\"z-index\", \"0\")\n                        .style(\"stroke\", object.color)\n                        .style(\"stroke-width\", \"1px\");\n                }\n\n                rects.selectAll(\".\" + object.className)\n                    .data(object.data)\n                    .enter()\n                    .append(\"rect\")\n                    .attr(\"clip-path\", \"url(#clip)\")\n                    .attr(\"class\", \"element \" + object.className)\n                    .attr(\"id\", function (d) {\n                        return \"f\" + d.id\n                    })\n                    .attr(\"x\", X)\n                    .attr(\"y\", function (d) {\n                        return d.level * rectShift\n                    })\n                    .attr(\"width\", rectWidth)\n                    .attr(\"height\", rectHeight)\n                    .style(\"fill\", function(d) { return d.color || object.color })\n                    .style(\"z-index\", \"13\")\n                    .call(d3.helper.tooltip(object));\n\n                forcePropagation(rects);\n            }\n        };\n\n        this.showFilteredFeature = function(className, color, baseUrl){\n\n            var featureSelected = yAxisSVG.selectAll(\".\"+className+\"Arrow\");\n            var minY = margin.left - 105;\n            var maxY = margin.left - 7;\n\n            var gradient = svg\n                .append(\"linearGradient\")\n                .attr(\"y1\", \"0\")\n                .attr(\"y2\", \"0\")\n                .attr(\"x1\", minY)\n                .attr(\"x2\", maxY)\n                .attr(\"id\", \"gradient\")\n                .attr(\"spreadMethod\", \"pad\")\n                .attr(\"gradientUnits\", \"userSpaceOnUse\");\n\n            gradient\n                .append(\"stop\")\n                .attr(\"offset\", \"0.3\")\n                .attr(\"stop-color\", \"#DFD5D3\")\n                .attr(\"stop-opacity\", 1);\n\n\n            var redgrad = gradient\n                .append(\"stop\")\n                .attr(\"offset\", \"1\")\n                .attr(\"stop-opacity\", 1)\n                .attr(\"stop-color\", \"#DFD5D3\");\n\n            redgrad\n                .attr(\"stop-color\", color);\n\n            var url_gradient = \"url(#gradient)\";\n            var url_dropshadow = \"url(#dropshadow)\";\n            if (baseUrl) {\n                url_gradient = \"url(\" + baseUrl + \"#gradient)\";\n                url_dropshadow = \"url(\" + baseUrl +\"#dropshadow)\";\n            }\n\n            var selection = yAxisSVG.selectAll(\".\"+className+\"Arrow\")\n                .style(\"fill\", url_gradient)\n                .style(\"stroke\", \"\")\n                .attr(\"filter\", url_dropshadow);\n            selection\n                .attr(\"points\", function (d) {\n                    return (margin.left - 105) + \",\" + (d.y - 3) + \", \" + (margin.left - 105) + \",\" + (d.y + 12) + \", \" + (margin.left - 10) + \",\" + (d.y + 12) + \", \" + (margin.left - 2) + \",\" + (d.y + 4.5) + \", \" + (margin.left - 10) + \",\" + (d.y -3); // x,y points\n                });\n        };\n        this.hideFilteredFeature = function(className){\n            yAxisSVG.selectAll(\".\"+className+\"Arrow\")\n                .style(\"fill\", \"rgba(95,46,38,0.2)\")\n                .attr(\"filter\", \"\")\n                .attr(\"points\", function (d) {\n                    return (margin.left - 105) + \",\" + (d.y - 3) + \", \" + (margin.left - 105) + \",\" + (d.y + 12) + \", \" + (margin.left - 15) + \",\" + (d.y + 12) + \", \" + (margin.left - 7) + \",\" + (d.y + 4.5) + \", \" + (margin.left - 15) + \",\" + (d.y -3); // x,y points\n                });\n        };\n\n        var transition = {\n            rectangle: function (object) {\n                svgContainer.selectAll(\".line\" + object.className)\n                    .attr(\"d\",line.x(function (d) {\n                    return scaling(d.x);\n                }));\n                var transit;\n                if (animation) {\n                    transit1 = svgContainer.selectAll(\".\" + object.className + \"Group\")\n    //                    .data(object.data)\n                        .transition()\n                        .duration(500);\n                    transit2 = svgContainer.selectAll(\".\" + object.className)\n                        .transition()\n                        .duration(500);\n                }\n                else {\n                    transit1 = svgContainer.selectAll(\".\" + object.className + \"Group\");\n                    transit2 = svgContainer.selectAll(\".\" + object.className);\n                }\n                transit1.attr(\"transform\", function (d) {\n                            return \"translate(\" + rectX(d) + \",0)\"\n                        });\n\n                transit2\n                    .attr(\"width\", rectWidth2);\n                svgContainer.selectAll(\".\" + object.className + \"Text\")\n                    .style(\"visibility\", function (d) {\n                        if (d.description) {\n                            return (scaling(d.y) - scaling(d.x)) > d.description.length * 8 && object.height > 11 ? \"visible\" : \"hidden\";\n                        } else return \"hidden\";\n                    });\n            },\n            multiRec: function (object) {\n                svgContainer.selectAll(\".\" + object.className)\n//                    .data(object.data)\n                    //.transition()\n                    //.duration(500)\n                    .attr(\"x\", function (d) {\n                        return scaling(d.x)\n                    })\n                    .attr(\"width\", function (d) {\n                        return scaling(d.y) - scaling(d.x)\n                    });\n            },\n            unique: function (object) {\n                svgContainer.selectAll(\".line\" + object.className)\n                    .attr(\"d\",line.x(function (d) {\n                    return scaling(d.x);\n                }));\n                var transit;\n                if (animation) {\n                    transit = svgContainer.selectAll(\".\" + object.className)\n    //                    .data(object.data)\n                        .transition()\n                        .duration(500);\n                }\n                else {\n                    transit = svgContainer.selectAll(\".\" + object.className);\n                }\n                transit\n//                    .data(object.data)\n                    //.transition()\n                    //.duration(500)\n                    .attr(\"x\", function (d) {\n                        return scaling(d.x - 0.4)\n                    })\n                    .attr(\"width\", function (d) {\n                        if (scaling(d.x + 0.4) - scaling(d.x - 0.4) < 2) return 2;\n                        else return scaling(d.x + 0.4) - scaling(d.x - 0.4);\n                    });\n            },\n            path: function (object) {\n                svgContainer.selectAll(\".line\" + object.className)\n                    .attr(\"d\",lineBond.x(function (d) {\n                                            return scaling(d.x);\n                                        })\n                                      .y(function (d) {\n                                            return -d.y * 10 + object.height;\n                                        })\n                         );\n                var transit;\n                if (animation) {\n                    transit = svgContainer.selectAll(\".\" + object.className)\n    //                    .data(object.data)\n                        .transition()\n                        .duration(500);\n                }\n                else {\n                    transit = svgContainer.selectAll(\".\" + object.className);\n                }\n                transit\n                    .attr(\"d\", lineBond.y(function (d) {\n                        return -d.y * 10 + object.height;\n                    }));\n            },\n            line: function (object) {\n                lineYscale.range([0, -(object.height)]).domain([0, -(object.level)]);\n                svgContainer.selectAll(\".line\" + object.className)\n                    .attr(\"d\", lineGen.y(function (d) {\n                        return lineYscale(-d.y) * 10 + object.shift;\n                    }));\n                var transit;\n                if (animation) {\n                    transit = svgContainer.selectAll(\".\" + object.className)\n    //                    .data(object.data)\n                        .transition()\n                        .duration(500);\n                }\n                else {\n                    transit = svgContainer.selectAll(\".\" + object.className);\n                }\n                \n                transit\n                    .attr(\"d\", lineGen.y(function (d) {\n                        return lineYscale(-d.y) * 10 + object.shift;\n                    })\n                          .interpolate(object.interpolation)\n                         );\n            },\n            text: function (object, start) {\n                var transit;\n                if (animation) {\n                    transit = svgContainer.selectAll(\".\" + object.className)\n    //                    .data(object.data)\n                        .transition()\n                        .duration(500);\n                }\n                else {\n                    transit = svgContainer.selectAll(\".\" + object.className);\n                }\n                transit\n                    .attr(\"x\", function (d, i) {\n                        return scaling(i + start)\n                    });\n            }\n        };\n\n        var brush = d3.svg.brush()\n            .x(scaling)\n            //.on(\"brush\", brushmove)\n            .on(\"brushend\", brushend);\n\n        function addBrush() {\n            svgContainer.append(\"g\")\n                .attr(\"class\", \"brush\")\n                .call(brush)\n                .selectAll(\"rect\")\n                .attr('height', Yposition + 50);\n        }\n        \n        this.zoom = function(start, end){\n            var zoomInside = current_extend.start<start && current_extend.end>end;\n            if (!zoomInside) {\n                svgContainer.selectAll(\".seqGroup\").remove();\n            }\n            brush.extent([start,end]);\n            brushend();\n        }\n        this.resetZoom = function(start, end){\n            resetAll();\n        }\n\n        function brushend() {\n            d3.select(div).selectAll('div.selectedRect').remove();\n            if (Object.keys(featureSelected).length !== 0 && featureSelected.constructor === Object) {\n                d3.select(featureSelected.id).style(\"fill\", featureSelected.originalColor);\n                featureSelected = {};\n                if (CustomEvent) {\n                    var event = new CustomEvent(self.events.FEATURE_DESELECTED_EVENT, {\n                        detail: {info:\"feature-deselected\"}\n                    });\n                    svgElement.dispatchEvent(event);\n                } else {\n                    console.warn(\"CustomEvent is not defined....\");\n                }\n                if (self.trigger) self.trigger(self.events.FEATURE_DESELECTED_EVENT, {info:\"feature-deselected\"});\n            }\n            // Check if brush is big enough before zooming\n            var extent = brush.extent();\n            var extentLength = Math.abs(extent[0] - extent[1]);\n\n            if (extent[0] < extent[1]) var start = parseInt(extent[0] - 1),\n                end = parseInt(extent[1] + 1);\n            else var start = parseInt(extent[1] + 1),\n                end = parseInt(extent[0] - 1);\n\n            var seq = displaySequence(extentLength);\n            if (!brush.empty() && extentLength > zoomMax) {\n                current_extend.length = extentLength;\n                var zoomScale = (fvLength / extentLength).toFixed(1);\n                $(div + \" .zoomUnit\").text(zoomScale.toString());\n                \n//                scaling.range([5,width-5]); \n                if (SVGOptions.showSequence && !(intLength) && seq && svgContainer.selectAll(\".AA\").empty()) {\n                    current_extend = { \n                    length : extentLength,\n                    start : start,\n                    end : end\n                    }\n                    seqShift = start;\n                    svgContainer.selectAll(\".sequenceLine\").remove();\n                    fillSVG.sequence(sequence.substring(start-1, end), 20, seqShift-1);\n                }\n\n                //modify scale\n//                scaling.range([5,width-5]);\n                scaling.domain(extent);\n                scalingPosition.range(extent);\n                var currentShift = seqShift ? seqShift : offset.start;\n                \n\n                transition_data(features, currentShift);\n                reset_axis();\n\n                if (CustomEvent) {\n                  svgElement.dispatchEvent(new CustomEvent(\n                    self.events.ZOOM_EVENT,\n                    {detail: { start: start, end: end, zoom: zoomScale }}\n                    ));\n                }\n                if (self.trigger) self.trigger(self.events.ZOOM_EVENT, {\n                            start: start,\n                            end: end,\n                            zoom: zoomScale\n                        });\n\n                //rectsPep2.classed(\"selected\", false);\n                d3.select(div).selectAll(\".brush\").call(brush.clear());\n            } else {\n                d3.select(div).selectAll(\".brush\").call(brush.clear());\n                //resetAll();\n            }\n        }\n//        \n        var resizeCallback = function(){\n            \n            updateWindow();\n        }\n        \n        $(window).on(\"resize\", resizeCallback);\n        \n        function updateWindow(){\n//            var new_width = $(div).width() - margin.left - margin.right - 17;\n//            var width_larger = (width < new_width);\n            \n            width = $(div).width() - margin.left - margin.right - 17;\n            d3.select(div+\" svg\")\n                .attr(\"width\", width + margin.left + margin.right);\n            d3.select(div+\" #clip>rect\").attr(\"width\", width);\n            if (SVGOptions.brushActive) {\n                d3.select(div+\" .background\").attr(\"width\", width);\n            }\n            d3.select(div).selectAll(\".brush\").call(brush.clear());\n            \n//            var currentSeqLength = svgContainer.selectAll(\".AA\").size();\n            var seq = displaySequence(current_extend.length);\n            if (SVGOptions.showSequence && !(intLength)){\n                if (seq === false && !svgContainer.selectAll(\".AA\").empty()) {\n                    svgContainer.selectAll(\".seqGroup\").remove();\n                    fillSVG.sequenceLine();\n                }\n                else if (seq === true && svgContainer.selectAll(\".AA\").empty()){\n                    svgContainer.selectAll(\".sequenceLine\").remove();\n                    fillSVG.sequence(sequence.substring(current_extend.start-1, current_extend.end), 20, current_extend.start-1);\n                    \n                }\n            }\n            \n            scaling.range([5,width-5]);\n            scalingPosition.domain([0, width]);\n            \n            transition_data(features, current_extend.start);\n            reset_axis();\n            \n        }\n\n        // If brush is too small, reset view as origin\n        function resetAll() {\n\n            //reset scale\n\n            $(\".zoomUnit\").text(\"1\");\n            scaling.domain([offset.start, offset.end]);\n            scalingPosition.range([offset.start, offset.end]);\n            var seq = displaySequence(offset.end - offset.start);\n            \n            if (SVGOptions.showSequence && !(intLength)){\n                if (seq === false && !svgContainer.selectAll(\".AA\").empty()){\n                    svgContainer.selectAll(\".seqGroup\").remove();\n                    fillSVG.sequenceLine();\n                }\n                else if (current_extend.length !== fvLength && seq === true && !svgContainer.selectAll(\".AA\").empty()) {\n                    svgContainer.selectAll(\".seqGroup\").remove();\n                    fillSVG.sequence(sequence.substring(offset.start-1,offset.end), 20, offset.start);\n                }\n            }\n\n            current_extend={ \n                    length : offset.end-offset.start,\n                    start : offset.start,\n                    end : offset.end\n                };\n            seqShift=0;\n            \n            transition_data(features, offset.start);\n            reset_axis();\n\n            // Fire Event\n            if (CustomEvent) {\n              svgElement.dispatchEvent(new CustomEvent(self.events.ZOOM_EVENT,\n                { detail: { start: 1, end: sequence.length, zoom: 1 }}));\n            };\n            if (self.trigger) self.trigger(self.events.ZOOM_EVENT, {\n                            start: 1,\n                            end: sequence.length,\n                            zoom: 1\n                        });\n\n            d3.select(div).selectAll(\".brush\").call(brush.clear());\n        }\n\n        function transition_data(features, start) {\n            features.forEach(function (o) {\n                if (o.type === \"rect\") {\n                    transition.rectangle(o);\n                } else if (o.type === \"multipleRect\") {\n                    transition.multiRec(o);\n                } else if (o.type === \"unique\") {\n                    transition.unique(o);\n                } else if (o.type === \"path\") {\n                    transition.path(o);\n                } else if (o.type === \"line\") {\n                    transition.line(o);\n                } else if (o.type === \"text\") {\n                    transition.text(o, start);\n                }\n            });\n        }\n\n        /** export to new axis file? */\n        function reset_axis() {\n            svgContainer\n                .transition().duration(500)\n                .select(\".x.axis\")\n                .call(xAxis);\n        }\n\n        function addVerticalLine() {\n            var vertical = d3.select(\".chart\")\n                .append(\"div\")\n                .attr(\"class\", \"Vline\")\n                .style(\"position\", \"absolute\")\n                .style(\"z-index\", \"19\")\n                .style(\"width\", \"1px\")\n                .style(\"height\", (Yposition + 50) + \"px\")\n                .style(\"top\", \"30px\")\n                // .style(\"left\", \"0px\")\n                .style(\"background\", \"#000\");\n\n            d3.select(\".chart\")\n                .on(\"mousemove.Vline\", function () {\n                    mousex = d3.mouse(this)[0] - 2;\n                    vertical.style(\"left\", mousex + \"px\")\n                });\n            //.on(\"click\", function(){\n            //    mousex = d3.mouse(this);\n            //    mousex = mousex[0] + 5;\n            //    vertical.style(\"left\", mousex + \"px\")});\n        }\n\n        this.addRectSelection = function (svgId) {\n            var featSelection = d3.select(svgId);\n            var elemSelected = featSelection.data();\n            var xTemp;\n            var yTemp;\n            var xRect;\n            var widthRect;\n            var svgWidth = SVGOptions.brushActive ? d3.select(\".background\").attr(\"width\") : svgContainer.node().getBBox().width;\n            d3.select('body').selectAll('div.selectedRect').remove();\n\n            var objectSelected = {type:featSelection[0][0].tagName, color:featSelection.style(\"fill\")};\n            colorSelectedFeat(svgId, objectSelected);\n\n            // Append tooltip\n            var selectedRect = d3.select(div)\n                .append('div')\n                .attr('class', 'selectedRect');\n\n            if (elemSelected[0].length === 3) {\n                xTemp = elemSelected[0][0].x;\n                yTemp = elemSelected[0][1].x;\n            } else if (elemSelected[0].x === elemSelected[0].y) {\n                xTemp = elemSelected[0].x - 0.5;\n                yTemp = elemSelected[0].y + 0.5;\n            } else {\n                xTemp = elemSelected[0].x;\n                yTemp = elemSelected[0].y;\n            }\n            if (scaling(xTemp) < 0) {\n                xRect = margin.left;\n                widthRect = (scaling(yTemp));\n            } else if (scaling(yTemp) > svgWidth) {\n                xRect = scaling(xTemp) + margin.left;\n                widthRect = svgWidth - scaling(xTemp);\n            } else {\n                xRect = scaling(xTemp) + margin.left;\n                widthRect = (scaling(yTemp) - scaling(xTemp));\n            }\n            selectedRect.style({\n                left: xRect + 'px',\n                top: 60 + 'px',\n                'background-color': 'rgba(0, 0, 0, 0.2)',\n                width: widthRect + 'px',\n                height: (Yposition + 50) + 'px',\n                position: 'absolute',\n                'z-index': -1,\n                'box-shadow': '0 1px 2px 0 #656565'\n            });\n        };\n\n        function initSVG(div, options) {\n\n            if (typeof options === 'undefined') {\n                var options = {\n                    'showAxis': false,\n                    'showSequence': false,\n                    'brushActive': false,\n                    'verticalLine': false,\n                    'toolbar': false,\n                    'bubbleHelp': false,\n                    'unit': \"units\",\n                    'zoomMax': 50\n                }\n            }\n\n            if (!$.fn.popover) {\n                options.bubbleHelp = false;\n                console.warn(\"The bubble help requires tooltip and popover bootstrap js libraries. The feature viewer will continue to work, but without the info bubble\");\n            }\n\n            // Create SVG\n            if (options.zoomMax) {\n                zoomMax = options.zoomMax;\n            }\n            if (!options.unit) {\n                options.unit = \"units\";\n            }\n            if (options.animation) {\n                animation = options.animation;\n            }\n\n            if (options.toolbar === true) {\n                \n                var headerOptions = $(div + \" .svgHeader\").length ? d3.select(div + \" .svgHeader\") : d3.select(div).append(\"div\").attr(\"class\", \"svgHeader\");\n                \n//                if (options.toolbarTemplate && options.toolbarTemplate === 2) {\n\n                    if (!$(div + ' .header-position').length) {\n                        var headerPosition = headerOptions\n                            .append(\"div\")\n                            .attr(\"class\", \"header-position\")\n                            .style(\"display\", \"inline-block\")\n                            .style(\"margin\", \"15px 10px 0px\")\n                            .style(\"padding\", \"0px\")\n                            .style(\"line-height\",\"32px\");\n                        headerPosition\n                            .append(\"div\")\n                            .attr(\"class\", \"position-label\")\n                            .style(\"padding\", \"0px 5px\")\n                            .style(\"display\", \"inline-block\")\n                            .style(\"padding\", \"0px\")\n                            .style(\"font-weight\",\"700\")\n                            .text(\"Position  :  \");\n                        headerPosition\n                            .append(\"div\")\n                            .style(\"display\", \"inline-block\")\n                            .style(\"padding\", \"0px\")\n                            .style(\"padding-left\", \"5px\")\n                            .append(\"div\")\n                            .style(\"min-width\",\"50px\")\n                            .attr(\"id\", \"zoomPosition\")\n                            .text(\"0\");\n                    }\n                    if (!$(div + ' .header-zoom').length) {\n                        var headerZoom = headerOptions\n                            .append(\"div\")\n                            .attr(\"class\", \"header-zoom\")\n                            .style(\"display\", \"inline-block\")\n                            .style(\"margin\", \"15px 0px 0px\")\n                            .style(\"padding\", \"0px\")\n                            .style(\"line-height\",\"32px\");\n                        headerZoom\n                            .append(\"div\")\n                            .attr(\"class\", \"zoom-label\")\n                            .style(\"padding\", \"0px 5px\")\n                            .style(\"display\", \"inline-block\")\n                            .style(\"padding\", \"0px\")\n                            .style(\"font-weight\",\"700\")\n                            .text(\"Zoom : \");\n\n                        headerZoom\n                            .append(\"div\")\n                            .style(\"display\", \"inline-block\")\n                            .style(\"padding\", \"0px\")\n                            .append(\"div\")\n                            .style(\"min-width\",\"50px\")\n                            .style(\"padding-left\", \"5px\")\n                            .append(\"span\")\n                            .text(\"x \")\n                            .append(\"span\")\n                            .attr(\"class\", \"zoomUnit\")\n                            .text(\"1\");\n                    }\n//                }\n//                else{\n//                    if (!$(div + ' .header-zoom').length) {\n//                        var headerZoom = headerOptions\n//                            .append(\"div\")\n//                            .attr(\"class\", \"panel panel-default header-zoom\")\n//                            .style(\"display\", \"inline-block\")\n//                            .style(\"width\", \"150px\")\n//                            .style(\"margin\", \"20px 0px 0px\")\n//                            .style(\"padding\", \"0px\");\n//                        headerZoom\n//                            .append(\"div\")\n//                            .attr(\"class\", \"panel-heading\")\n//                            .style(\"padding\", \"0px 15px\")\n//                            .style(\"border-right\", \"1px solid #DDD\")\n//                            .style(\"display\", \"inline-block\")\n//                            .style(\"width\", \"80px\")\n//                            .append(\"h5\")\n//                            .style(\"padding\", \"0px\")\n//                            .style(\"height\", \"10px\")\n//                            .style(\"color\", \"#777\")\n//                            .text(\"ZOOM\");\n//                        headerZoom\n//                            .append(\"div\")\n//                            .attr(\"class\", \"panel-body\")\n//                            .style(\"display\", \"inline-block\")\n//                            .style(\"padding\", \"0px\")\n//                            .append(\"h5\")\n//                            .style(\"padding-left\", \"15px\")\n//                            .style(\"height\", \"10px\")\n//                            .text(\"x \")\n//                            .append(\"span\")\n//                            .attr(\"class\", \"zoomUnit\")\n//                            .text(\"1\");\n//                    }\n//                    if (!$(div + ' .header-position').length) {\n//                        var headerPosition = headerOptions\n//                            .append(\"div\")\n//                            .attr(\"class\", \"panel panel-default header-position\")\n//                            .style(\"display\", \"inline-block\")\n//                            .style(\"width\", \"175px\")\n//                            .style(\"margin\", \"20px 20px 0px\")\n//                            .style(\"padding\", \"0px\");\n//                        headerPosition\n//                            .append(\"div\")\n//                            .attr(\"class\", \"panel-heading\")\n//                            .style(\"padding\", \"0px 15px\")\n//                            .style(\"border-right\", \"1px solid #DDD\")\n//                            .style(\"display\", \"inline-block\")\n//                            .append(\"h5\")\n//                            .style(\"padding\", \"0px\")\n//                            .style(\"height\", \"10px\")\n//                            .style(\"color\", \"#777\")\n//                            .text(\"POSITION\");\n//                        headerPosition\n//                            .append(\"div\")\n//                            .attr(\"class\", \"panel-body\")\n//                            .style(\"display\", \"inline-block\")\n//                            .style(\"padding\", \"0px\")\n//                            .append(\"h5\")\n//                            .style(\"padding-left\", \"15px\")\n//                            .style(\"height\", \"10px\")\n//                            .append(\"span\")\n//                            .attr(\"id\", \"zoomPosition\")\n//                            .text(\"0\");\n//                    }\n//                }\n                var headerZoom = $(div + ' .header-zoom').length ? d3.select(div + ' .header-zoom') : headerOptions;\n                if (options.bubbleHelp === true) {\n                    if (!$(div + ' .header-help').length) {\n                        var helpContent = \"<div><strong>To zoom in :</strong> Left click to select area of interest</div>\" +\n                            \"<div><strong>To zoom out :</strong> Right click to reset the scale</div>\" +\n                            \"<div><strong>Zoom max  :</strong> Limited to <strong>\" + zoomMax.toString() + \" \" + options.unit +\"</strong></div>\";\n//                        var headerHelp = headerOptions\n                        var headerHelp = headerZoom\n                            .append(\"div\")\n//                            .insert(\"div\",\":first-child\")\n//                            .attr(\"class\", \"pull-right\")\n                            .style(\"display\", \"inline-block\")\n//                            .style(\"margin\", \"15px 35px 0px 0px\")\n                            .style(\"margin\", \"0px\")\n                            .style(\"margin-right\", \"5px\")\n//                            .style(\"line-height\",\"32px\")\n                            .style(\"padding\", \"0px\");\n                        var buttonHelp = headerHelp\n                            .append(\"a\")\n                            .attr(\"type\", \"button\")\n                            .attr(\"class\", \"header-help\")\n                            .attr(\"data-toggle\", \"popover\")\n                            .attr(\"data-placement\", \"auto left\")\n                            .attr(\"title\", \"Help\")\n                            .attr(\"data-content\", helpContent)\n                            .style(\"font-size\", \"14px\");\n//                            .style(\"margin-bottom\", \"2px\");\n                        buttonHelp\n                            .append(\"span\")\n                            .attr(\"class\", \"label label-as-badge label-info\")\n                            .style(\"font-weight\",\"500\")\n//                            .style(\"border-radius\",\"3px\")\n                            .style(\"border-radius\",\"3px\")\n//                            .style(\"background-color\",\"#f8f8f8\")\n//                            .style(\"background-color\",\"#108D9F\")\n//                            .style(\"border\",\"1px solid #ddd\")\n//                            .style(\"border\",\"1px solid #0C6B78\")\n//                            .style(\"color\",\"#777\")\n                            .style(\"box-shadow\",\"inset 0px 0px 4px rgba(0,0,0,0.10)\")\n                            .style(\"color\",\"#fff\")\n//                            .style(\"padding\",\"2px 6px\")\n                            .html(\"<span class='state'>Show</span> help\");\n                        $(function () {\n                            $('[data-toggle=\"popover\"]').popover({html: true});\n                            $(div + ' .header-help').on('hide.bs.popover', function () {\n                              $(this).find(\".state\").text(\"Show\");\n                            });\n                            $(div + ' .header-help').on('show.bs.popover', function () {\n                              $(this).find(\".state\").text(\"Hide\");\n                            });\n                        })\n                    }\n                }\n            }\n                    if (!$(div + ' .variantHeader').length) {\n\n                        const optionsHeader = $(div + \" .svgHeader\").length ? d3.select(div + \" .svgHeader\") : d3.select(div).append(\"div\").attr(\"class\", \"svgHeader\");\n\n                        const multipleVariantContainer = optionsHeader\n                                                    .append(\"div\")\n                                                    .style(\"position\", \"relative\")\n                                                    .style(\"display\",\"flex\")\n                                                    .style(\"column-gap\", \"1rem\")\n\n                        let showMultipleVariantPopup = true;\n                        let inputCount = 0;\n                        let error = \"\";\n\n                        multipleVariantContainer\n                            .append(\"span\")\n                            .attr(\"class\", \"add-variant-btn\")\n                            .style(\"margin-left\", \"auto\")\n                            .text(\"+ Add Multiple Variants\")\n                            .on(\"click\", function() {\n                                multipleVariantPopup(showMultipleVariantPopup)\n                                if(multipleVariant.length === 0) {\n                                    appendInputFields()\n                                } \n                                showMultipleVariantPopup = !showMultipleVariantPopup\n                            })\n\n\n                        const popup = multipleVariantContainer\n                            .append(\"div\")\n                            .attr(\"class\", \"multiple-variant-popup\")\n                            \n                            \n                        popup.html(`<p>Enter the variants</p><div class=\"header\"><input type=\"checkbox\" id=\"select-all-variant\" />${deleteIcon}<p>Position</p><p>Original</p><p>Variant</p></div>`)\n\n                        $('.delete-icon').on(\"click\", function() {\n                                    $(\".input-wrapper input:checkbox\").each(function(){\n                                        var $this = $(this);\n                                        if($this.is(\":checked\")){\n                                            let id = $(this).attr('id')\n                                            $this.parent().remove()\n                                            const variantIndex = multipleVariant.findIndex(m => m.id == id)\n                                            multipleVariant.splice(variantIndex, 1)\n                                        }\n                                    });\n\n                                    if(multipleVariant.length === 0) {\n                                        inputCount = 0;\n                                        setInputError(false);\n                                        const variantValues = { id: inputCount, nextprotPosition: \"\", originalAminoAcid: \"\", variantAminoAcid: \"\" }\n                                        multipleVariant.push(variantValues)\n                                        appendInputFields();\n                                    } \n                                    callOnVariantChanged()\n                                })\n                                \n                                $('#select-all-variant').on(\"click\", function() {\n                                    $('.input-wrapper input:checkbox').prop('checked', this.checked); \n                                })\n\n                            popup.append('svg')\n                                .attr(\"height\", \"1.5rem\")\n                                .attr(\"width\", \"1.5rem\")\n                                .attr(\"class\", \"cancel-icon\")\n                                .on(\"click\", function() {\n                                    showMultipleVariantPopup = !showMultipleVariantPopup\n                                    multipleVariantPopup(false)\n                                })\n                                .attr(\"viewBox\",\"0 0 500 620\")\n                                .html(crossIcon)\n                        \n                        const inputContainer = popup\n                            .append(\"div\")\n                            .attr(\"class\", \"input-container\")\n\n                        /**\n                         * Updates the values of multiple variant entry popup\n                         * @param {number} value - Position of amino acid/variant amino acid value\n                         * @param {string} type - \"Position\" || \"Variant\"\n                         * @param {number} idx - Index of multipleVariant to be updated\n                         */\n\n                        function updateInputValues(value, type, idx) {\n                            const variantIndex = multipleVariant.findIndex(m => m.id == idx);\n\n                            value = value.split(\" /\")[0];\n                            \n                            console.log(value, type, idx)\n                            console.log(variantIndex)\n                            console.log(multipleVariant)\n\n                            switch(type) {\n                                case \"nextprotPosition\": \n                                                const originalValue = sequence.charAt(Number(value)-1);\n                                                $(`#${idx}-original`).text(function() {\n                                                    return `${originalValue} / ${dropdownOptions[originalValue]}`\n                                                });\n                                                multipleVariant[variantIndex]['originalAminoAcid'] = originalValue;\n                                                multipleVariant[variantIndex].nextprotPosition = Number(value);\n                                                if(!validateInput(originalValue, multipleVariant[variantIndex]['variantAminoAcid'])) {\n                                                    multipleVariant[variantIndex]['variantAminoAcid'] = \"\";\n                                                    $(`#${idx}-variant`).text(\"Select variant\");\n                                                };\n                                                break;\n                                case \"variantAminoAcid\": if(!validateInput(multipleVariant[variantIndex]['originalAminoAcid'], value)) break;\n                                                multipleVariant[variantIndex]['variantAminoAcid'] = value;\n                                                break;\n                            }\n                        }\n\n                        /**\n                         * Add input fields to multiple variant entry popup\n                         */\n\n                        function appendInputFields() {\n                            $('#multiple-add-variant-btn').attr(\"disabled\", true)\n\n                            const variantValues = { id: inputCount, nextprotPosition: \"\", 'originalAminoAcid': \"\", 'variantAminoAcid': \"\" }\n                            multipleVariant.push(variantValues)\n\n\n                            const inputWrapper = inputContainer.append(\"div\").attr(\"class\", \"input-wrapper\")\n                            \n                            inputWrapper.append(\"input\")\n                            .attr(\"type\", \"checkbox\")\n                            .attr(\"class\", \"input-checkbox\")\n                            .attr(\"id\", function() {\n                                return inputCount;\n                            })\n\n                            inputWrapper\n                            .append(\"input\")\n                            .attr(\"class\", \"popup-input\")   \n                            .attr(\"maxlength\", \"5\")\n                            .attr(\"id\", function() {\n                                return inputCount + '-nextprotPosition';\n                            })\n                            .attr(\"type\", \"number\")\n                            .attr(\"value\", function(d, i) {\n                                return i;\n                            })\n                            .on(\"change\", function(d) {\n                                const value = d3.select(this).property(\"value\");\n                                if(value > sequence.length) return\n                                d3.select(this).attr(\"value\", value)\n                                var idx = d3.select(this).property(\"id\").split(\"-\")[0]\n                                updateInputValues(value, \"nextprotPosition\", idx)\n                            });\n\n                            \n                            inputWrapper\n                            .append(\"span\")\n                            .attr(\"id\", function() {\n                                return inputCount + '-original';\n                            })\n                            .attr(\"class\", \"original-input\")\n                            .text(\"0\")      \n                            \n                            const dropdown = inputWrapper\n                            .append(\"div\")\n                            .attr(\"class\", \"dropdown\")\n                            \n                            dropdown\n                            .append(\"button\")\n                            .attr(\"class\", \"dropdown-btn\")\n                            .attr(\"id\", function() {\n                                return inputCount + '-variant';\n                            })  \n                            .text(\"Select variant\")\n                            .on(\"click\", function() {\n                                let id = $(this).attr('id');\n                                $(\"div.dropdown-content\").not(`#${id}-dropdown`).hide();\n                                $(`#${id}-dropdown`).toggle()\n                            })\n                            \n                            dropdown.append(\"div\")\n                            .attr(\"class\", \"bottom-arrow-icon\")\n                            .html(bottomArrowIcon)\n\n                            const dropdownContainer = dropdown.append(\"div\")\n                            .attr(\"id\", function() {\n                                return inputCount + '-variant-dropdown';\n                            })   \n                            .attr(\"class\", \"dropdown-content\")\n                            \n                            dropdownContainer.append(\"input\")\n                            .attr(\"placeholder\", \"Search...\")\n                            .attr(\"id\", \"dropdown-search-input\")\n                            .on(\"keyup\", function() {\n                                var input, filter, p, i, div;\n                                input = document.getElementById(\"dropdown-search-input\");\n                                filter = input.value.toUpperCase();\n                                div = document.getElementById(\"dropdown-options\");\n                                p = div.getElementsByTagName(\"p\");\n\n                                for (i = 0; i < p.length; i++) {\n                                    txtValue = p[i].textContent || p[i].innerText;\n                                    if (txtValue.toUpperCase().indexOf(filter) > -1) {\n                                      p[i].style.display = \"\";\n                                    } else {\n                                      p[i].style.display = \"none\";\n                                    }\n                                  }\n                            })\n\n                            let dropdownOptionContainer = dropdownContainer.append(\"div\")\n                            .attr(\"class\", \"dropdown-option-container\")\n                            .attr(\"id\", \"dropdown-options\")\n\n                            Object.entries(dropdownOptions).forEach(([key, value]) => {\n                                dropdownOptionContainer.append(\"p\")\n                                .attr(\"class\", \"dropdown-options\")\n                                .attr(\"id\", `${key} / ${value}`)\n                                .text(`${key} / ${value}`)\n                            })\n                            inputCount++;\n                        }\n\n                         /**\n                         * Check if input values are not null before adding next set of input fields\n                         */\n\n                        function validateInput(original, variant){\n                            if(original === variant) {\n                                setInputError(true);\n                                $('#multiple-add-variant-btn').attr(\"disabled\", true);\n                                return false;\n                            } else {\n                                setInputError(false)\n                            }\n\n                            const lastSelectValue = $('.input-container').children(\":last\").children(\":last\").children(\":first\").text();\n                            const lastInputValue = $('.input-container').children(\":last\").children(\".popup-input\").attr(\"value\");\n                           \n                            if(!(lastSelectValue == \"\" || lastSelectValue == \"Select variant\" || lastInputValue == 0)) {\n                                $('#multiple-add-variant-btn').attr(\"disabled\", false);\n                            } \n                            return true;\n                        }\n\n                         /**\n                         * Set input error value\n                         */\n                        function setInputError(showError) {\n                            error = showError ? \"Original value cannot be same as variant\" : \"\";\n                            $('#variant-error').text(error);\n                        }\n\n                        $(document).on('click', '.dropdown-options', function () {\n                            const value = $(this).attr('id');\n                            $('.dropdown-content').hide()\n                            \n                            const id = $(this).parent().parent().attr(\"id\")\n                            const index = id.split('-')[0];\n                            $(this).parent().parent().parent().children('button').text(function() {\n                                return value\n                            });\n                            \n                            updateInputValues(value, \"variantAminoAcid\", index)\n                        })\n                        \n                        popup.append(\"div\")\n                                    .attr(\"id\", \"variant-error\")\n                                    .text(\"\")\n\n                        const btnContainer = popup.append(\"div\")\n                                                .attr(\"class\", \"multiple-variant-btn-container\")\n                        \n\n                        btnContainer\n                                .append(\"button\")\n                                .attr(\"class\", \"add-variant-btn\")\n                                .attr(\"id\", \"multiple-add-variant-btn\")\n                                .attr(\"disabled\", true)\n                                .text(\"+\")\n                                .on(\"click\", function() {\n                                    callOnVariantChanged()\n                                    appendInputFields()\n                                })\n                            \n                        btnContainer\n                                .append(\"span\")\n                                .text(\"Get Predictions\")\n                                .attr(\"class\", \"get-predictions-btn\")\n                                .on(\"click\", function() {\n                                    callOnGetPredictions();\n                                })\n\n                        function multipleVariantPopup(showPopup) {\n                            popup\n                            .style(\"display\", showPopup ? \"block\" : \"none\")\n                        }\n\n                        multipleVariantContainer\n                        .append(\"span\")\n                            .attr(\"class\", \"get-predictions-btn\")\n                            .text(\"Get Predictions\")\n                            .on(\"click\", function() {\n                               callOnGetPredictions();\n                            })\n                    }\n            \n            \n            svg = d3.select(div).append(\"svg\")\n                .attr(\"width\", width + margin.left + margin.right)\n                .attr(\"height\", height + margin.top + margin.bottom)\n                .style(\"z-index\", \"2\")\n                .on(\"contextmenu\", function (d, i) {\n                    d3.event.preventDefault();\n                    resetAll();\n                    // react on right-clicking\n                });\n            svgElement = el.getElementsByTagName(\"svg\")[0];\n\n\n            svgContainer = svg\n                .append(\"g\")\n                .attr(\"id\", \"svg-container\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n            //Create Clip-Path\n            var defs = svgContainer.append(\"defs\");\n\n            defs.append(\"clipPath\")\n                .attr(\"id\", \"clip\")\n                .append(\"rect\")\n                .attr(\"width\", width)\n                .attr(\"height\", height);\n\n            var filter = defs.append(\"filter\")\n                .attr(\"id\", \"dropshadow\")\n                .attr(\"height\", \"200%\");\n\n            filter.append(\"feGaussianBlur\")\n                .attr(\"in\", \"SourceAlpha\")\n                .attr(\"stdDeviation\", 3)\n                .attr(\"result\", \"blur\");\n            filter.append(\"feOffset\")\n                .attr(\"in\", \"blur\")\n                .attr(\"dx\", -2)\n                .attr(\"dy\", 2)\n                .attr(\"result\", \"offsetBlur\");\n\n            var feMerge = filter.append(\"feMerge\");\n\n            feMerge.append(\"feMergeNode\")\n                .attr(\"in\", \"offsetBlur\");\n            feMerge.append(\"feMergeNode\")\n                .attr(\"in\", \"SourceGraphic\");\n\n            svgContainer.on('mousemove', function () {\n                let absoluteMousePos = SVGOptions.brushActive ? d3.mouse(d3.select(\".background\").node()) : d3.mouse(svgContainer.node());;          \n                seqPos = Math.round(scalingPosition(absoluteMousePos[0]));\n                absoluteSeqPos = seqPos;\n                if (!options.positionWithoutLetter) {\n                    seqPos += sequence[seqPos-1] || \"\";\n                }\n                $(div + \" #zoomPosition\").text(seqPos);\n            });\n            \n            if (typeof options.dottedSequence !== \"undefined\"){\n                SVGOptions.dottedSequence = options.dottedSequence;\n            }\n            if (options.showSequence && !(intLength)) {\n                SVGOptions.showSequence = true;\n                if (displaySequence(offset.end - offset.start)) {\n                    fillSVG.sequence(sequence.substring(offset.start-1, offset.end), Yposition, offset.start);\n                }\n                else{\n                    fillSVG.sequenceLine();\n                }\n                features.push({\n                    data: sequence,\n                    name: \"Sequence\",\n                    className: \"AA\",\n                    color: \"black\",\n                    type: \"text\"\n                });\n                yData.push({\n                    title: \"Sequence\",\n                    y: Yposition - 8\n                });\n            }\n            if (options.showAxis) addXAxis(Yposition);\n            addYAxis();\n            if (options.brushActive) {\n                SVGOptions.brushActive = true;\n                zoom = true;\n                addBrush();\n            }\n            if (options.verticalLine) {\n                SVGOptions.verticalLine = true;\n                addVerticalLine();\n            }\n\n            updateSVGHeight(Yposition);\n\n        }\n\n        initSVG(div, options);\n\n        // Workaround for re-ordering svg <g> element\n        $('.seqGroup').appendTo($('#svg-container'));\n\n        /**\n        * Calls onVariantChanged Custom Event\n        */\n        function callOnVariantChanged() {\n            let values = [...multipleVariant];\n            if(values.length > 0) {\n                const lastValue = values.length-1;\n                if(values[lastValue]['originalAminoAcid'] == \"\" || values[lastValue]['variantAminoAcid'] == \"\") {\n                    values.splice(lastValue, 1);\n                }\n            }\n\n            values = [...values, ...singleVariant];\n\n            if (CustomEvent) {\n                svgElement.dispatchEvent(new CustomEvent(\n                  self.events.VARIANT_ADDED_EVENT,  \n                  {detail: values}\n                  ));\n              }\n              if (self.trigger) self.trigger(self.events.VARIANT_ADDED_EVENT, \n                values\n            ); \n        }\n        \n\n        /**\n        * Calls onGetPredictions Custom Event\n        */\n        function callOnGetPredictions() {\n            let values = multipleVariant.map(({id,...rest}) => ({...rest}));\n\n            if(values.length > 0) {\n                const lastValue = values.length-1;\n                if(values[lastValue]['originalAminoAcid'] == \"\" || values[lastValue]['variantAminoAcid'] == \"\") {\n                    values.splice(lastValue, 1);\n                }\n            }\n\n            values = [...values, ...singleVariant];\n            \n            if (CustomEvent) {\n                svgElement.dispatchEvent(new CustomEvent(\n                self.events.GET_PREDICTIONS_EVENT,\n                { detail: values }\n                ));\n            }\n            if (self.trigger) self.trigger(self.events.GET_PREDICTIONS_EVENT, \n                values\n                );\n          }\n\n        this.addFeature = function (object) {\n            Yposition += 20;\n            features.push(object);\n            fillSVG.typeIdentifier(object);\n            updateYaxis();\n            updateXaxis(Yposition);\n            updateSVGHeight(Yposition);\n            if (SVGOptions.brushActive) {\n                svgContainer.selectAll(\".brush rect\")\n                    .attr('height', Yposition + 50);\n            }\n            if (SVGOptions.verticalLine) d3.selectAll(\".Vline\").style(\"height\", (Yposition + 50) + \"px\");\n            if (d3.selectAll(\".element\")[0].length > 1500) animation = false;\n\n        }\n        \n        this.clearInstance = function (){\n            $(window).off(\"resize\", resizeCallback);\n            svg = null;\n            svgElement = null;\n            svgContainer = null;\n            yAxisSVGgroup = null;\n            yAxisSVG = null;\n            features = null;\n            sbcRip = null;\n            d3.helper = {};\n        }\n    }\n\nif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n    module.exports = createFeature;\n}","const crossIcon = `    <svg\nxmlns=\"http://www.w3.org/2000/svg\"\nwidth=\"512\"\nheight=\"512\"\nfill=\"none\"\nviewBox=\"0 0 512 512\"\n>\n<path fill=\"#7D7D7D\" d=\"M94 101H405V382H94z\"></path>\n<path\n  fill=\"#DFDFDF\"\n  d=\"M256 0C114.61 0 0 114.61 0 256s114.61 256 256 256c141.38 0 256-114.61 256-256S397.39 0 256 0zm87.72 307c13.06 12.28 17.61 26.86 4.11 40.55-13.5 13.69-28 9.52-40.57-3.41l-52.08-53.6c-18.33 19.5-34.31 36.71-50.52 53.69-12.47 13.07-27.19 16.91-40.53 3.18s-8.6-28.24 4.38-40.55c16.54-15.7 33.06-31.41 56.4-53.59-20.08-17-38.19-31.84-55.64-47.38-14-12.48-19.23-27.9-4.12-42.21 14-13.22 28.46-7.8 40.57 5.12 15.57 16.61 31.06 33.28 50.39 54 20-21.34 35.94-38.68 52.21-55.74 11.81-12.39 26-15.48 38.77-3.31 13.88 13.24 10.45 27.93-2.62 40.51-16.95 16.31-34.17 32.32-55.13 52.1 20.1 18.64 37.31 34.56 54.38 50.64z\"\n></path>\n</svg>`;\n\nconst deleteIcon = `<svg\nclass=\"delete-icon\"\nxmlns=\"http://www.w3.org/2000/svg\"\nx=\"0\"\ny=\"0\"\nviewBox=\"0 0 7 10.583\"\n>\n<g color=\"#000\" fontFamily=\"sans-serif\">\n  <path\n    style={{\n      lineHeight: \"normal\",\n      fontVariantLigatures: \"normal\",\n      fontVariantPosition: \"normal\",\n      fontVariantCaps: \"normal\",\n      fontVariantNumeric: \"normal\",\n      fontVariantAlternates: \"normal\",\n      fontVariantEastAsian: \"normal\",\n      fontFeatureSettings: \"normal\",\n      fontVariationSettings: \"normal\",\n      WebkitTextIndent: \"0\",\n      textIndent: \"0\",\n      WebkitTextAlign: \"start\",\n      textAlign: \"start\",\n      WebkitTextDecorationLine: \"none\",\n      textDecorationLine: \"none\",\n      WebkitTextDecorationStyle: \"solid\",\n      textDecorationStyle: \"solid\",\n      WebkitTextDecorationColor: \"#000000\",\n      textDecorationColor: \"#000000\",\n      WebkitTextTransform: \"none\",\n      textTransform: \"none\",\n      WebkitTextOrientation: \"mixed\",\n      textOrientation: \"mixed\",\n      whiteSpace: \"normal\",\n      shapePadding: \"0\",\n      shapeMargin: \"0\",\n      inlineSize: \"0\",\n      isolation: \"auto\",\n      mixBlendMode: \"normal\",\n      solidColor: \"#000000\",\n      solidOpacity: \"1\",\n    }}\n    d=\"M3.506-52.386a.796.796 0 00-.793.792v.264H.799a.265.265 0 100 .529h.474l.315 4.672c.042.619.525 1.15 1.168 1.15H5.71c.643 0 1.125-.531 1.168-1.15l.316-4.672h.473a.265.265 0 100-.53H5.754v-.263a.796.796 0 00-.793-.792zm0 .529H4.96c.151 0 .263.112.263.263v.264H3.24v-.264c0-.15.115-.263.266-.263zM1.8-50.801h4.865l-.313 4.635c-.026.38-.283.658-.641.658H2.756c-.358 0-.615-.279-.64-.658z\"\n    enableBackground=\"accumulate\"\n    overflow=\"visible\"\n    transform=\"translate(0 52.916)\"\n  ></path>\n  <path\n    style={{\n      lineHeight: \"normal\",\n      fontVariantLigatures: \"normal\",\n      fontVariantPosition: \"normal\",\n      fontVariantCaps: \"normal\",\n      fontVariantNumeric: \"normal\",\n      fontVariantAlternates: \"normal\",\n      fontVariantEastAsian: \"normal\",\n      fontFeatureSettings: \"normal\",\n      fontVariationSettings: \"normal\",\n      WebkitTextIndent: \"0\",\n      textIndent: \"0\",\n      WebkitTextAlign: \"start\",\n      textAlign: \"start\",\n      WebkitTextDecorationLine: \"none\",\n      textDecorationLine: \"none\",\n      WebkitTextDecorationStyle: \"solid\",\n      textDecorationStyle: \"solid\",\n      WebkitTextDecorationColor: \"#000000\",\n      textDecorationColor: \"#000000\",\n      WebkitTextTransform: \"none\",\n      textTransform: \"none\",\n      WebkitTextOrientation: \"mixed\",\n      textOrientation: \"mixed\",\n      whiteSpace: \"normal\",\n      shapePadding: \"0\",\n      shapeMargin: \"0\",\n      inlineSize: \"0\",\n      isolation: \"auto\",\n      mixBlendMode: \"normal\",\n      solidColor: \"#000000\",\n      solidOpacity: \"1\",\n    }}\n    d=\"M3.44-49.742a.265.265 0 00-.264.265v2.645a.265.265 0 00.263.266.265.265 0 00.266-.266v-2.645a.265.265 0 00-.266-.265zM5.027-49.742a.265.265 0 00-.265.265v2.645a.265.265 0 00.265.266.265.265 0 00.264-.266v-2.645a.265.265 0 00-.264-.265z\"\n    enableBackground=\"accumulate\"\n    overflow=\"visible\"\n    transform=\"translate(0 52.916)\"\n  ></path>\n</g><svg>`;\n\nconst bottomArrowIcon = `<svg\nxmlns=\"http://www.w3.org/2000/svg\"\nx=\"0\"\ny=\"0\"\nenableBackground=\"new 0 0 48 48\"\nviewBox=\"0 0 48 60\"\n>\n<path d=\"M47.8 7.1C47.4 6.4 46.7 6 46 6H2C1.3 6 .6 6.4.2 7.1s-.3 1.5.1 2.1l22 32c.4.5 1 .9 1.6.9s1.3-.3 1.6-.9l22-32c.6-.7.6-1.5.3-2.1z\"></path>\n</svg>`\n\nmodule.exports = { crossIcon, deleteIcon, bottomArrowIcon };\n","const dropdownOptions = {\n  A: \"Ala\",\n  R: \"Arg\",\n  N: \"Asn\",\n  D: \"Asp\",\n  C: \"Cys\",\n  E: \"Glu\",\n  Q: \"Gln\",\n  G: \"Gly\",\n  H: \"His\",\n  I: \"Ile\",\n  L: \"Leu\",\n  K: \"Lys\",\n  M: \"Met\",\n  F: \"Phe\",\n  P: \"Pro\",\n  S: \"Ser\",\n  T: \"Thr\",\n  W: \"Trp\",\n  Y: \"Tyr\",\n  V: \"Val\",\n};\n\nmodule.exports = { dropdownOptions };\n","const createFeature = require('./feature-viewer')\n\nconst Nextprot = require(\"nextprot/src/nextprot-core.js\");\nconst NXUtils = require(\"nextprot/src/nextprot-utils.js\")[\"NXUtils\"];\nconst NXViewerUtils = require(\"nextprot/src/nextprot-utils.js\")[\"NXViewerUtils\"];\n\nvar nxClient;\n\nfunction nxFeatureViewer(nx, entry, div, options) {\n    nxClient = nx;\n    return new Promise(function(resolve, reject) {\n        var ft;\n        var isoform = entry;\n        var sequence = \"\";\n        if (entry.startsWith(\"NX_\")) {\n            var isoNb = isoform.split(\"-\")[1] ? isoform : isoform.split(\"-\")[0] + \"-1\";\n            var nxEntry = isoform.split(\"-\")[0];\n            nx.getProteinSequence(nxEntry).then(function (data) {\n                var isoSeq = data.filter(function(iso) {return iso.uniqueName === isoNb});\n                var sequence = isoSeq[0].sequence;\n                createFeature.prototype.isoform = isoNb;\n                createFeature.prototype.entry = nxEntry;\n                createFeature.prototype.nxClient = nx;\n                createFeature.prototype.addNxFeature = addNxFeature;\n                ft = new createFeature(sequence, div, options);\n                resolve(ft);\n            })\n        }\n    });\n\n}\n\nfunction filterFeatures(featuresForViewer, viewer) {\n    var isoName = viewer.isoform;\n    for (var i = 0; i < featuresForViewer.length; i++) {\n        if (Object.keys(featuresForViewer[i]).length !== 0 && featuresForViewer[i].hasOwnProperty(isoName)) {\n            var feature = jQuery.extend({}, featuresForViewer[i][isoName]);\n            viewer.addFeature(feature);\n        }\n    }\n}\n\nfunction mergeData(oneData, metaData, viewer) {\n    featuresForViewer = [];\n\n    for (var i = 0; i < oneData.length; i++) {\n        var feat = NXUtils.convertMappingsToIsoformMap(oneData[i], metaData[i].name, metaData[i].filter);\n        var featForViewer = NXViewerUtils.convertNXAnnotations(feat, metaData[i]);\n        featuresForViewer.push(featForViewer);\n    }\n    return featuresForViewer;\n}\n\nfunction getFeaturesByview(nx, list, entry) {\n    \n    var data = [];\n    for (var feat in list) {\n        switch (list[feat]) {\n        case \"sequence\":\n            data.push(nx.getProteinSequence(entry));\n            break;\n        case \"antibody\":\n            data.push(nx.getAntibody(entry));\n            break;\n        case \"isoform-mapping\":\n            data.push(nx.getIsoformMapping(entry));\n            break;\n        default:\n            data.push(nx.getAnnotationsByCategory(entry, list[feat]));\n            break;\n        }\n    }\n    return data;\n}\n\nfunction addNxFeature(featuresName, featuresStyle) {\n    var that = this;\n    return new Promise(function(resolve, reject) {\n        Promise.all(getFeaturesByview(that.nxClient, featuresName, that.entry))\n            .then(function (oneData) {\n                var featuresForViewer = mergeData(oneData, featuresStyle);\n                filterFeatures(featuresForViewer, that);\n                resolve(that);\n            }).catch(function (err) {\n                // catch any error that happened so far\n                console.log(\"Argh, broken: \" + err.message);\n                console.log(\"Error at line : \" + err.stack);\n            });\n        \n    });\n}\n\nif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n    module.exports = nxFeatureViewer;\n}"],"sourceRoot":""}