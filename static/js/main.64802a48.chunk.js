(this["webpackJsonpvep-community-tool"]=this["webpackJsonpvep-community-tool"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(13),o=a.n(r),c=(a(49),a(7)),s=a(5),l=a(12),u=[{APIRef:"sequence",metadata:{name:"Sequence"}},{APIRef:"beta-strand",metadata:{name:"Beta strand",className:"betastrand",color:"#B3F0C2",type:"rect",filter:"Secondary structure"}},{APIRef:"helix",metadata:{name:"Helix",className:"helix",color:"#B3F0D1",type:"rect",filter:"Secondary structure"}},{APIRef:"turn",metadata:{name:"Turn",className:"turn",color:"#B3F0E1",type:"rect",filter:"Secondary structure"}},{APIRef:"signal-peptide",metadata:{name:"Signal peptide",className:"sign",color:"#B3B3E1",type:"rect",filter:"Processing"}},{APIRef:"propeptide",metadata:{name:"Propeptide",className:"pro",color:"#B3B3B3",type:"rect",filter:"Processing"}},{APIRef:"mature-protein",metadata:{name:"Mature protein",className:"mat",color:"#B3B3C2",type:"rect",filter:"Processing"}},{APIRef:"initiator-methionine",metadata:{name:"Initiator Met",className:"initMeth",color:"#B3B3D1",type:"unique",filter:"Processing"}},{APIRef:"peroxisome-transit-peptide",metadata:{name:"Transit peptide",className:"pero",color:"#B3B3F0",type:"rect",filter:"Processing"}},{APIRef:"mitochondrial-transit-peptide",metadata:{name:"Transit peptide",className:"mito",color:"#B3B3F0",type:"rect",filter:"Processing"}},{APIRef:"domain",metadata:{name:"Domain",className:"domain",color:"#B3C2C2",type:"rect",filter:"Region"}},{APIRef:"miscellaneous-region",metadata:{name:"Region",className:"miscregion",color:"#B3C2B3",type:"rect",filter:"Region"}},{APIRef:"repeat",metadata:{name:"Repeat",className:"repeat",color:"#98B7D5",type:"rect",filter:"Region"}},{APIRef:"calcium-binding-region",metadata:{name:"Calcium binding",className:"calcium",color:"#B3C2E1",type:"rect",filter:"Region"}},{APIRef:"zinc-finger-region",metadata:{name:"Zinc finger",className:"calcium",color:"#B3C2E1",type:"rect",filter:"Region"}},{APIRef:"dna-binding-region",metadata:{name:"DNA binding",className:"dnabind",color:"#B3C2FF",type:"rect",filter:"Region"}},{APIRef:"nucleotide-phosphate-binding-region",metadata:{name:"Nucleotide binding",className:"nucleobind",color:"#B3D1B3",type:"rect",filter:"Region"}},{APIRef:"coiled-coil-region",metadata:{name:"Coiled-coil",className:"coiledcoil",color:"#B3D1C2",type:"rect",filter:"Region"}},{APIRef:"short-sequence-motif",metadata:{name:"Sequence motif",className:"motif",color:"#B3D1D1",type:"rect",filter:"Region"}},{APIRef:"compositionally-biased-region",metadata:{name:"Composition bias",className:"biased",color:"#B3D1E1",type:"rect",filter:"Region"}},{APIRef:"interacting-region",metadata:{name:"Interacting region",className:"intReg",color:"#B3D1F0",type:"rect",filter:"Region"}},{APIRef:"interaction-mapping",metadata:{name:"Exp. interaction",className:"intregion",color:"#B3E1D1",type:"rect",filter:"Region"}},{APIRef:"topological-domain",metadata:{name:"Topological domain",className:"topodomain",color:"#A5DBA5",type:"rect",filter:"Topology"}},{APIRef:"transmembrane-region",metadata:{name:"Membrane",className:"membrane",color:"#A5DBB7",type:"rect",filter:"Topology"}},{APIRef:"intramembrane-region",metadata:{name:"Membrane",className:"intramembrane",color:"#A5DBB7",type:"rect",filter:"Topology"}},{APIRef:"disulfide-bond",metadata:{name:"Disulfide bond",className:"dsB",color:"#B3B3E1",type:"path",filter:"Modified Residue"}},{APIRef:"modified-residue",metadata:{name:"Modified residue",className:"modifRes",color:"#B3C2B3",type:"unique",filter:"Modified Residue"}},{APIRef:"cross-link",metadata:{name:"Cross-link",className:"crossLink",color:"#B3C2C2",type:"unique",filter:"Modified Residue"}},{APIRef:"glycosylation-site",metadata:{name:"Glycosylation",className:"glycoSite",color:"#74E374",type:"unique",filter:"Modified Residue"}},{APIRef:"lipidation-site",metadata:{name:"Lipidation",className:"lipidation",color:"#A3B5DB",type:"unique",filter:"Modified Residue"}},{APIRef:"selenocysteine",metadata:{name:"Non-standard AA",className:"seleno",color:"#859DE7",type:"unique",filter:"Modified Residue"}},{APIRef:"miscellaneous-site",metadata:{name:"Site",className:"site",color:"#B3F0E1",type:"unique",filter:"Site"}},{APIRef:"active-site",metadata:{name:"Active site",className:"actSite",color:"#B3F0F0",type:"unique",filter:"Site"}},{APIRef:"binding-site",metadata:{name:"Binding site",className:"bindsite",color:"#82E6FF",type:"unique",filter:"Site"}},{APIRef:"cleavage-site",metadata:{name:"Cleavage site",className:"cleavsite",color:"#B3FFB3",type:"unique",filter:"Site"}},{APIRef:"metal-binding-site",metadata:{name:"Metal binding",className:"metal",color:"#B3FFC2",type:"unique",filter:"Site"}},{APIRef:"variant",metadata:{name:"Variant",className:"variant",color:"rgba(0,255,154,0.3)",type:"unique",filter:"Variant"}},{APIRef:"mutagenesis",metadata:{name:"Mutagenesis",className:"mutagenesis",color:"#73FFE3",type:"unique",filter:"Variant"}},{APIRef:"sequence-conflict",metadata:{name:"Conflict",className:"seqconflict",color:"#6FFFFF",type:"unique",filter:"Conflict"}},{APIRef:"peptide-mapping",metadata:{name:"Peptide",className:"pep",color:"#B3E1D1",type:"rect",filter:"Peptide",height:8}},{APIRef:"isoform-mapping",metadata:{name:"Isoform"}}],d=a(3);function m(e,t){var a=[];return e.map((function(e){0!==Object.keys(e).length&&Object.prototype.hasOwnProperty.call(e,t)&&a.push(Object(d.a)({},e[t]))})),a}var f=a(8),p=a.n(f),b=a(15),g=a(2),j=a(41),O=a(113),h=a(42),v=a.n(h);function y(e){var t=e.columns,a=e.data;if("csv"===e.fileType){var n=t.map((function(e){return e.exportValue})),i=v.a.unparse({fields:n,data:a});return new Blob([i],{type:"text/csv"})}}var x,P,N,A="Couldn't find entry data.",R=a(43),I=a.n(R),B=a(1),S={header:!0,dynamicTyping:!0,skipEmptyLines:!0,transformHeader:function(e){return e.replace(/\W/g,"-")}},C=function(e){var t=e.callGetPredictions,a=Object(n.useState)(""),i=Object(s.a)(a,2),r=i[0],o=i[1];return Object(B.jsxs)("div",{className:"csv-button-container",children:[Object(B.jsxs)("div",{className:"csv-button",children:[Object(B.jsx)("button",{className:"export-btn",children:"Upload CSV"}),r&&Object(B.jsx)("p",{children:r})]}),Object(B.jsx)(I.a,{cssClass:"csv-reader-input",onFileLoaded:function(e,a){t(e),o(a.name)},parserOptions:S,cssInputClass:"csv-input"})]})},w=a.p+"static/media/down_arrow_icon.4f1d5ef1.svg",E=a.p+"static/media/up_arrow_icon.6ff07499.svg",F=a.p+"static/media/sort_icon.86d67f70.svg",D=a.p+"static/media/info_icon.09c4a3bc.svg",k=a(24),T=a.n(k),q=function(){if(Object({NODE_ENV:"production",PUBLIC_URL:"/VEP-community-tool",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://api.nextprot.org/vep-api"}).REACT_APP_DEVELOPMENT){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log(t)}},M="https://api.nextprot.org/vep-api";function _(e){return L.apply(this,arguments)}function L(){return(L=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("".concat(M,"/vep-results"),t).then((function(e){return e.data})).catch((function(e){q(e)}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(M,"/mapping-isoforms/").concat(t)).then((function(e){return e.data})).catch((function(e){q(e)}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=["title","titleId"];function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function W(e,t){var a=e.title,i=e.titleId,r=U(e,V);return n.createElement("svg",G({id:"L5",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",xmlSpace:"preserve",ref:t,"aria-labelledby":i},r),a?n.createElement("title",{id:i},a):null,x||(x=n.createElement("circle",{fill:"#166ff8",stroke:"none",cx:6,cy:50,r:6},n.createElement("animateTransform",{attributeName:"transform",dur:"1s",type:"translate",values:"0 15 ; 0 -15; 0 15",repeatCount:"indefinite",begin:.1}))),P||(P=n.createElement("circle",{fill:"#166ff8",stroke:"none",cx:30,cy:50,r:6},n.createElement("animateTransform",{attributeName:"transform",dur:"1s",type:"translate",values:"0 10 ; 0 -10; 0 10",repeatCount:"indefinite",begin:.2}))),N||(N=n.createElement("circle",{fill:"#166ff8",stroke:"none",cx:54,cy:50,r:6},n.createElement("animateTransform",{attributeName:"transform",dur:"1s",type:"translate",values:"0 5 ; 0 -5; 0 5",repeatCount:"indefinite",begin:.3}))))}var z=n.forwardRef(W),X=(a.p,function(e){var t=e.id;return Object(B.jsx)("div",{id:t,className:"loader",children:Object(B.jsx)(z,{})})}),K=[{Header:"S. No.",accessor:"id",Cell:function(e){return Object(B.jsx)("div",{children:Number(e.row.id)+1})}},{Header:"Position",accessor:"nextprotPosition"},{Header:"Original",accessor:"originalAminoAcid"},{Header:"Variant",accessor:"variantAminoAcid"},{Header:"Sift",accessor:"sift"},{Header:"Polyphen",accessor:"polyphen"}];function J(e){var t=e.globalFilter,a=e.setGlobalFilter,i=Object(n.useState)(t),r=Object(s.a)(i,2),o=r[0],c=r[1],l=Object(g.useAsyncDebounce)((function(e){a(e||void 0)}),200);return Object(B.jsx)("input",{className:"search-input",value:o||"",onChange:function(e){c(e.target.value),l(e.target.value)},placeholder:"Search..."})}var Z=function(e){var t=e.predictionLoading,a=e.setPredictionLoading,i=e.data,r=e.setData,o=e.isoName,c=function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={isoform:o,variants:t},a(!0),e.next=4,_(n).then((function(e){r(e),a(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Object(n.useMemo)((function(){return K}),[]),l=Object(g.useTable)({columns:s,data:i,getExportFileBlob:y,getExportFileName:function(){return o},initialState:{pageIndex:0,pageSize:10}},g.useGlobalFilter,g.useSortBy,j.a,g.usePagination),u=l.getTableProps,m=l.getTableBodyProps,f=l.headerGroups,h=l.prepareRow,v=l.page,x=l.state,P=l.canPreviousPage,N=l.canNextPage,A=l.pageOptions,R=l.pageCount,I=l.gotoPage,S=l.nextPage,D=l.preGlobalFilteredRows,k=l.setGlobalFilter,T=l.previousPage,q=l.setPageSize,M=l.state,L=M.pageIndex,H=M.pageSize,V=l.exportData;return Object(B.jsxs)("div",{className:"variant-table-container",children:[Object(B.jsxs)("div",{className:"table-header",children:[Object(B.jsx)(C,{callGetPredictions:c}),Object(B.jsxs)("div",{style:{marginLeft:"auto"},children:[Object(B.jsx)(J,{preGlobalFilteredRows:D,globalFilter:x.globalFilter,setGlobalFilter:k}),Object(B.jsx)("button",{className:"export-btn",onClick:function(){V("csv",!0)},children:"Export All as CSV"})]})]}),Object(B.jsxs)("table",Object(d.a)(Object(d.a)({},u()),{},{className:"variant-data-table",children:[Object(B.jsx)("thead",{children:f.map((function(e){return Object(n.createElement)("tr",Object(d.a)(Object(d.a)({},e.getHeaderGroupProps()),{},{key:Object(O.a)()}),e.headers.map((function(e){return Object(n.createElement)("th",Object(d.a)(Object(d.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{key:Object(O.a)()}),e.render("Header"),Object(B.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(B.jsx)("img",{src:w,className:"icon",alt:"Down arrow icon"}):Object(B.jsx)("img",{src:E,className:"icon",alt:"Down arrow icon"}):Object(B.jsx)("img",{src:F,className:"icon",alt:"Down arrow icon"})}))})))}))}),Object(B.jsx)("tbody",Object(d.a)(Object(d.a)({},m()),{},{children:v.map((function(e){return h(e),Object(n.createElement)("tr",Object(d.a)(Object(d.a)({},e.getRowProps()),{},{key:Object(O.a)()}),e.cells.map((function(e){return Object(n.createElement)("td",Object(d.a)(Object(d.a)({},e.getCellProps()),{},{key:Object(O.a)()}),e.render("Cell"))})))}))}))]})),t&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("p",{className:"table-text",children:Object(B.jsx)("i",{children:"Fetching predictions..."})}),Object(B.jsx)(X,{})]}),0!==i.length||t?Object(B.jsxs)("div",{className:"pagination",children:[Object(B.jsx)("button",{onClick:function(){return I(0)},disabled:!P,children:"<<"})," ",Object(B.jsx)("button",{onClick:function(){return T()},disabled:!P,children:"<"})," ",Object(B.jsx)("button",{onClick:function(){return S()},disabled:!N,children:">"})," ",Object(B.jsx)("button",{onClick:function(){return I(R-1)},disabled:!N,children:">>"})," ",Object(B.jsxs)("span",{children:["Page"," ",Object(B.jsxs)("strong",{children:[L+1," of ",A.length]})," "]}),Object(B.jsxs)("span",{children:["| Go to page:"," ",Object(B.jsx)("input",{type:"number",defaultValue:L+1||1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;I(t)}})]})," ",Object(B.jsx)("select",{value:H,onChange:function(e){q(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(B.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]}):Object(B.jsxs)("p",{className:"table-text",children:[Object(B.jsx)("i",{children:"No records added. Add variants and click on get predictions to get results"}),"."]})]})},Q=a(44),Y=function(e){var t=e.offset,a=e.isoform;return Object(B.jsx)(B.Fragment,{children:t<0?Object(B.jsxs)("div",{className:"isoform-info",children:[a,Object(B.jsx)("img",{title:"Isoform mapping not available",src:D,className:"icon",alt:"Info Icon"})]}):a})},$=function(e){var t=e.isoform,a=e.handleIsoformChange,i=Object(n.useState)(),r=Object(s.a)(i,2),o=r[0],c=r[1],l=Object(n.useState)(),u=Object(s.a)(l,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){var e=[];t.map((function(t){var a={value:t.isoform,label:Object(B.jsx)(Y,{isoform:t.isoform,offset:t.offset}),disabled:t.offset<0};e.push(a)})),c(e),m(e[0])}),[t]),o?Object(B.jsxs)("div",{className:"isoform-select-wrapper",children:[Object(B.jsx)("p",{children:"Change Isoform"}),Object(B.jsx)(Q.a,{className:"isoform-select",options:o,value:d,isOptionDisabled:function(e){return e.disabled},defaultValue:d,onChange:function(e){a(e.value),m(e)}})]}):Object(B.jsx)(B.Fragment,{})},ee=function(){var e,t=Object(n.useState)([]),a=Object(s.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(),d=Object(s.a)(o,2),f=d[0],p=d[1],b=Object(n.useState)(),g=Object(s.a)(b,2),j=g[0],O=g[1],h=Object(n.useState)(),v=Object(s.a)(h,2),y=v[0],x=v[1],P=Object(n.useState)(),N=Object(s.a)(P,2),R=N[0],I=N[1],S=Object(n.useState)(null),C=Object(s.a)(S,2),w=C[0],E=C[1],F=Object(n.useState)(!0),D=Object(s.a)(F,2),k=D[0],T=D[1],M=Object(n.useState)(!1),L=Object(s.a)(M,2),V=L[0],G=L[1],U=new l.Nextprot.Client("Calipho Group","VEP community tool");function W(e,t,a,n){t.forEach((function(t){t.uniqueName===a&&(e=new l.createFeature(t.sequence,"#fv1",{showAxis:!0,showSequence:!0,brushActive:!0,toolbar:!0,bubbleHelp:!0,zoomMax:10,variant:!0}),n.map((function(t){e.addFeature(t)})),e.onVariantChanged((function(e){r(Object(c.a)(e.detail))})),e.onGetPredictions((function(e){G(!0),_({isoform:a,variants:e.detail}).then((function(e){r(e),G(!1)}))})))}))}return Object(n.useEffect)((function(){var t,a,n=new URLSearchParams(window.location.search).get("entry");(function(e){return H.apply(this,arguments)})(n).then((function(e){p(e)})),Promise.all(function(e,t,a){var n=[];for(var i in e)switch(e[i].APIRef){case"sequence":n.push(t.getProteinSequence(a));break;case"antibody":n.push(t.getAntibody(a));break;case"isoform-mapping":n.push(t.getIsoformMapping(a));break;case"variant-medical":n.push(t.getAnnotationsWithProperty(a,"variant","disease-related",!0));break;case"miscellaneous-region-interactions":n.push(t.getAnnotationsWithProperty(a,"miscellaneous-region","interaction-related",!0));break;default:n.push(t.getAnnotationsByCategory(a,e[i].APIRef))}return n}(u,U,n)).then((function(n){if(n){t=n[0];var i=function(e,t){for(var a,n=[],i=1;i<e.length-1;i++){var r=l.NXUtils.convertMappingsToIsoformMap(e[i],t[i].name.replace(".",""),t[i].filter,"");a=l.NXViewerUtils.convertNXAnnotations(r,t[i],{}),n.push(a)}return n}(n,function(){var e=[];return u.map((function(t,a){e.push(u[a].metadata)})),e}());a=m(i,t[0].isoformAccession),W(e,t,t[0].isoformAccession,a),O(t),I(i),x(t[0].isoformAccession),T(!1)}else E(A)})).catch((function(e){q(e)}))}),[]),Object(B.jsxs)(B.Fragment,{children:[k&&Object(B.jsx)(X,{id:"feature-loader"}),Object(B.jsxs)("div",{className:"viewer-container",children:[f&&!w&&Object(B.jsx)($,{isoName:y,isoform:f,handleIsoformChange:function(t){x(t),document.getElementById("fv1").innerHTML="";var a=m(R,t);W(e,j,t,a)}}),Object(B.jsx)("div",{id:"fv1"}),Object(B.jsx)(Z,{predictionLoading:V,setPredictionLoading:G,data:i,setData:r,isoName:y})]})]})},te=a.p+"static/media/nextprot-logo.d0c0c045.png",ae=(a(108),function(){return Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)("img",{src:te,className:"logo",alt:"neXtProt logo"}),Object(B.jsx)(ee,{})]})}),ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,114)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),r(e),o(e)}))};o.a.render(Object(B.jsx)(i.a.StrictMode,{children:Object(B.jsx)(ae,{})}),document.getElementById("root")),ne()},49:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.64802a48.chunk.js.map